(self["webpackChunk"] = self["webpackChunk"] || []).push([["expressCheckoutMobile"],{

/***/ "../node_modules/@myntra/m-comp/react/SVGIcon/Back.jsx":
/*!*************************************************************!*\
  !*** ../node_modules/@myntra/m-comp/react/SVGIcon/Back.jsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var Back = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("svg", __assign({ xmlns: "http://www.w3.org/2000/svg", width: "16", height: "16", viewBox: "0 0 16 16" }, props),
    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("path", { d: "M16 7 3.8 7 9.4 1.4 8 0 0 8 8 16 9.4 14.6 3.8 9 16 9z" }))); };
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Back);


/***/ }),

/***/ "../node_modules/@myntra/m-comp/react/SVGIcon/Reload.jsx":
/*!***************************************************************!*\
  !*** ../node_modules/@myntra/m-comp/react/SVGIcon/Reload.jsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

function Reload(props) {
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", __assign({ width: 18, height: 18, viewBox: "0 0 18 18", fill: "none", xmlns: "http://www.w3.org/2000/svg" }, props),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { d: "M17.022 0h-.352a.422.422 0 00-.422.422v3.889A8.715 8.715 0 008.722 0 8.719 8.719 0 00.014 8.279a.421.421 0 00.422.44h.352a.421.421 0 00.421-.4 7.523 7.523 0 017.513-7.123 7.52 7.52 0 016.69 4.073h-4.018a.422.422 0 00-.422.422v.352a.422.422 0 00.422.426h5.628a.422.422 0 00.422-.422V.422A.422.422 0 0017.022 0zm-.014 8.719h-.352a.421.421 0 00-.421.4 7.522 7.522 0 01-11.43 6.025 7.527 7.527 0 01-2.773-2.975H6.05a.422.422 0 00.422-.422v-.352a.422.422 0 00-.422-.426H.422a.422.422 0 00-.422.422v5.625a.422.422 0 00.422.422h.352a.422.422 0 00.422-.422v-3.889a8.715 8.715 0 007.526 4.311 8.72 8.72 0 008.708-8.279.42.42 0 00-.422-.44z", fill: "#FF3F6C" })));
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Reload);


/***/ }),

/***/ "../node_modules/@myntra/m-comp/react/SVGIcon/ShieldDashed.jsx":
/*!*********************************************************************!*\
  !*** ../node_modules/@myntra/m-comp/react/SVGIcon/ShieldDashed.jsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var ShieldDashed = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("svg", __assign({ width: 99, height: 30, viewBox: "0 0 99 30", fill: "none", xmlns: "http://www.w3.org/2000/svg" }, props),
    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("path", { stroke: "#06997E", strokeLinecap: "round", strokeDasharray: "5 0", d: "M.5 14.5h31m36 0h31" }),
    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("path", { d: "M49.449.002a.987.987 0 00-.38.092L37.554 5.645A.987.987 0 0037 6.53v4.452c0 8.282 4.958 15.384 12.1 18.534a.987.987 0 00.8 0C57.043 26.365 62 19.263 62 10.98V6.529a.987.987 0 00-.555-.884L49.932.095a.987.987 0 00-.483-.093zm.051 2.076l10.526 5.079v3.824c0 7.333-4.301 13.587-10.526 16.519-6.224-2.932-10.526-9.186-10.526-16.52V7.158L49.5 2.078zm5.828 7.782a.987.987 0 00-.585.278l-6.878 6.568-2.93-2.93a.988.988 0 00-1.73.678.986.986 0 00.333.71l3.618 3.619a.987.987 0 001.378.02l7.566-7.237a.986.986 0 00-.772-1.706z", fill: "#1CAE91" }))); };
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ShieldDashed);


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/ActionButton.js":
/*!*********************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/ActionButton.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! commonBrowserUtils/Helper */ "./browser/utils/Helper/index.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! commonBrowserUtils/PaymentConstants */ "./browser/utils/PaymentConstants.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/get */ "../node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var iconComp_Rupee_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! iconComp/Rupee.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/Rupee.jsx");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();





var SWIPE_FACTOR = _expressConstants__WEBPACK_IMPORTED_MODULE_3__.default.SWIPE_FACTOR, SWIPE_TO_ORDER = _expressConstants__WEBPACK_IMPORTED_MODULE_3__.default.SWIPE_TO_ORDER, PAY = _expressConstants__WEBPACK_IMPORTED_MODULE_3__.default.PAY;



var COD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_4__.default.COD;
var Arrow = function (_a) {
    var opacity = _a.opacity;
    return react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.arrow, style: { opacity: opacity } });
};
Arrow.propTypes = {
    opacity: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().number)
};
var Arrows = function (_a) {
    var showAnim = _a.showAnim;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.arrows, " ").concat(showAnim ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.animateArrows : '') },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(Arrow, { opacity: 1 }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(Arrow, { opacity: 0.8 }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(Arrow, { opacity: 0.5 })));
};
Arrow.propTypes = {
    showAnim: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().bool)
};
var ActionTxt = function (_a) {
    var finalAmount = _a.finalAmount, _b = _a.text, text = _b === void 0 ? PAY : _b, showAmount = _a.showAmount;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.actionTxt }, text),
        showAmount && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", null,
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_Rupee_jsx__WEBPACK_IMPORTED_MODULE_6__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.rupeeWhite }),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", null, (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_1__.currencyValue)(finalAmount))))));
};
ActionTxt.propTypes = {
    finalAmount: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().number),
    text: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().string),
    showAmount: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().bool)
};
var startX, diff = 0, hasSwiped = false;
var ActionButton = /** @class */ (function (_super) {
    __extends(ActionButton, _super);
    function ActionButton(props) {
        var _this = _super.call(this, props) || this;
        _this.setRef = _this.setRef.bind(_this);
        _this.state = {
            showAnim: true
        };
        _this.arrows = null;
        _this.btnLength = 0;
        _this.onTouchStart = _this.onTouchStart.bind(_this);
        _this.onTouchMove = _this.onTouchMove.bind(_this);
        _this.onTouchEnd = _this.onTouchEnd.bind(_this);
        return _this;
    }
    ActionButton.prototype.onTouchStart = function (e) {
        this.setState({
            showAnim: false
        }, function () {
            var touchObj = e.changedTouches[0];
            startX = touchObj.pageX;
            e.preventDefault();
        });
    };
    ActionButton.prototype.onTouchMove = function (e) {
        var event = e.changedTouches[0];
        var end = 0;
        if (event.pageX)
            end = event.pageX;
        else if (event.clientX)
            end = event.clientX;
        diff = end - startX;
        if (diff > 0 && diff < this.btnLength * SWIPE_FACTOR) {
            this.arrows.style.left = 10 + diff + 'px';
        }
        if (diff >= this.btnLength * SWIPE_FACTOR && !hasSwiped) {
            hasSwiped = true;
            this.arrows.style.opacity = 0;
            this.props.payNow();
        }
    };
    ActionButton.prototype.onTouchEnd = function () {
        var isTwoFAVisible = lodash_get__WEBPACK_IMPORTED_MODULE_5___default()(this.props.twoFA, 'display', false);
        this.setState({
            showAnim: true
        });
        if (!hasSwiped) {
            this.arrows.style.left = 10 + 'px';
        }
        else if (isTwoFAVisible || this.props.isCaptchaVisible) {
            hasSwiped = false;
            this.arrows.style.left = 10 + 'px';
            this.arrows.style.opacity = 1;
        }
    };
    ActionButton.prototype.componentDidMount = function () {
        if (this.arrows) {
            this.btnLength = this.actionBtn.offsetWidth;
            this.arrows.addEventListener('touchstart', this.onTouchStart, false);
            this.arrows.addEventListener('touchmove', this.onTouchMove, false);
            this.arrows.addEventListener('touchend', this.onTouchEnd, false);
        }
    };
    ActionButton.prototype.componentWillUnmount = function () {
        if (this.arrows) {
            this.arrows.removeEventListener('touchstart', this.onTouchStart, false);
            this.arrows.removeEventListener('touchmove', this.onTouchMove, false);
            this.arrows.removeEventListener('touchend', this.onTouchEnd, false);
        }
    };
    ActionButton.prototype.setRef = function (node) {
        this.arrows = node;
    };
    ActionButton.prototype.render = function () {
        var _this = this;
        var isCOD = this.props.paymentType === COD;
        var finalAmount = this.props.expressCheckoutData.finalAmount;
        var actionTxt = PAY;
        if (!finalAmount || isCOD) {
            actionTxt = SWIPE_TO_ORDER;
        }
        var payNow = actionTxt !== SWIPE_TO_ORDER ? this.props.payNow : function () { };
        var showAmount = !!(!isCOD && finalAmount);
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.payNow, ref: function (elm) { return (_this.actionBtn = elm); } },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.actionButton, onClick: payNow },
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.arrowWrapper, ref: this.setRef }, this.props.paymentType === COD || !finalAmount ? (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(Arrows, { showAnim: this.state.showAnim })) : null),
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(ActionTxt, { finalAmount: finalAmount, text: actionTxt, showAmount: showAmount }))));
    };
    return ActionButton;
}(react__WEBPACK_IMPORTED_MODULE_0__.default.Component));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ActionButton);
ActionButton.propTypes = {
    payNow: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().func),
    expressCheckoutData: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().object),
    paymentType: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().string),
    twoFA: (prop_types__WEBPACK_IMPORTED_MODULE_7___default().object)
};
ActionButton.defaultProps = {
    payNow: function () { },
    expressCheckoutData: {},
    paymentType: ''
};


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/BalanceAmount.js":
/*!**********************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/BalanceAmount.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
/* harmony import */ var commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! commonBrowserUtils/Helper */ "./browser/utils/Helper/index.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util.js */ "./browser/components/cart/mobile/ExpressCheckoutContainer/util.js");
/* harmony import */ var commonComp_ToolTip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! commonComp/ToolTip */ "./browser/components/common/ToolTip/index.js");
/* harmony import */ var _ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ExpressCheckoutComponents */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var iconComp_Info_jsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! iconComp/Info.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/Info.jsx");
/* harmony import */ var iconComp_Rupee_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! iconComp/Rupee.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/Rupee.jsx");
/* harmony import */ var iconComp_CheckboxActive_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! iconComp/CheckboxActive.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/CheckboxActive.jsx");
/* harmony import */ var iconComp_CheckboxInactive_jsx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! iconComp/CheckboxInactive.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/CheckboxInactive.jsx");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();












var SELLER_INFO_CREDIT = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.SELLER_INFO_CREDIT, SELLER_INFO_LOYALTY = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.SELLER_INFO_LOYALTY, LOYALTY_MSG = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.LOYALTY_MSG, CREDIT_MSG = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.CREDIT_MSG, LOYALTY = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.LOYALTY, CREDIT = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.CREDIT;
var createMarkup = function (str, amount, total, info, showOnlyTotal, toggleFn) {
    var hideTotal = amount === total;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.markupWrapper },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.creditMarkup, onClick: toggleFn },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null,
                str,
                ":\u00A0"),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("b", null,
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_Rupee_jsx__WEBPACK_IMPORTED_MODULE_8__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.rupeeStyle }),
                showOnlyTotal ? (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.currencyValue)(total) : (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.currencyValue)(amount)),
            ' ',
            !hideTotal && !showOnlyTotal && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", null,
                "\u00A0 out of",
                ' ',
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("b", null,
                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_Rupee_jsx__WEBPACK_IMPORTED_MODULE_8__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.rupeeStyle }),
                    (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.currencyValue)(total)),
                ' '))),
        info && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_ToolTip__WEBPACK_IMPORTED_MODULE_4__.default, { elem: react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_Info_jsx__WEBPACK_IMPORTED_MODULE_7__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.tooltipInfoIcon }), className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.toolTipText, tipStyle: { left: '1px', top: '-8px' } }, info))));
};
var BalanceAmount = /** @class */ (function (_super) {
    __extends(BalanceAmount, _super);
    function BalanceAmount(props) {
        var _this = _super.call(this, props) || this;
        _this.toggleLoyalty = _this.toggleLoyalty.bind(_this);
        _this.toggleCredit = _this.toggleCredit.bind(_this);
        _this.LPeventTriggered = false;
        _this.GCeventTriggered = false;
        return _this;
    }
    BalanceAmount.prototype.componentDidUpdate = function () {
        var _a = this.hasCreditBalance(this.props), hasLoyalty = _a.hasLoyalty, hasCredit = _a.hasCredit, gcBalance = _a.gcBalance, lpBalance = _a.lpBalance;
        var uidx = (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.getUidx)();
        if (hasLoyalty && !this.LPeventTriggered) {
            this.triggerLPLoadEvent(uidx, lpBalance);
        }
        if (hasCredit && !this.GCeventTriggered) {
            this.triggerGCLoadEvent(uidx, gcBalance);
        }
    };
    BalanceAmount.prototype.triggerLPLoadEvent = function (uidx, lpBalance) {
        triggerEvent('XPRESS_POINTS_LOAD', {
            custom: {
                widget: {
                    name: 'express-checkout',
                    type: 'card'
                },
                widget_items: {
                    name: 'myntra-points',
                    type: 'button'
                },
                custom: {
                    v1: uidx,
                    v2: lpBalance
                }
            }
        });
        this.LPeventTriggered = true;
    };
    BalanceAmount.prototype.triggerGCLoadEvent = function (uidx, gcBalance) {
        triggerEvent('XPRESS_CREDIT_LOAD', {
            custom: {
                widget: {
                    name: 'express-checkout',
                    type: 'card'
                },
                widget_items: {
                    name: 'myntra-credit',
                    type: 'button'
                },
                custom: {
                    v1: uidx,
                    v2: gcBalance
                }
            }
        });
        this.GCeventTriggered = true;
    };
    BalanceAmount.prototype.toggleCredit = function () {
        var _a = this.props, _b = _a.gcObj, _c = _b === void 0 ? {} : _b, gcBalance = _c.gcBalance, creditChecked = _c.creditChecked, gcApplicable = _c.gcApplicable, updateCredit = _a.updateCredit;
        var gcSellerDisabled = !gcApplicable.value;
        var gcCheckboxDisabled = !(0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.isValidAmount)(gcBalance) || gcSellerDisabled;
        if (gcCheckboxDisabled)
            return;
        updateCredit(!creditChecked);
    };
    BalanceAmount.prototype.toggleLoyalty = function () {
        var _a = this.props, _b = _a.lpObj, _c = _b === void 0 ? {} : _b, loyaltyChecked = _c.loyaltyChecked, lpApplicable = _c.lpApplicable, lpBalance = _c.lpBalance, updateLoyalty = _a.updateLoyalty;
        var lpSellerDisabled = !lpApplicable.value;
        var lpCheckboxDisabled = !(0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.isValidAmount)(lpBalance) || lpSellerDisabled;
        if (lpCheckboxDisabled)
            return;
        updateLoyalty(!loyaltyChecked);
    };
    BalanceAmount.prototype.getMarkupFor = function (type) {
        var _a = this.props, _b = _a.gcObj, gcBalance = _b.gcBalance, gcAmount = _b.gcAmount, creditChecked = _b.creditChecked, gcApplicable = _b.gcApplicable, _c = _a.lpObj, lpBalance = _c.lpBalance, lpAmount = _c.lpAmount, loyaltyChecked = _c.loyaltyChecked, lpApplicable = _c.lpApplicable, _d = _a.loyaltyInfo, conversion = _d.conversion, finalAmount = _d.finalAmount, orderTotal = _d.orderTotal;
        var finalMarkup;
        var toggleFn = function () { };
        var appliableCredit = gcAmount || Math.min(finalAmount, gcBalance);
        var maxLoyalty = Math.round(conversion * parseInt(orderTotal, 10));
        var usableLoyalty = Math.min(maxLoyalty, lpBalance);
        var gcInfo = !gcApplicable.value ||
            (gcApplicable.value && gcApplicable.remark === 'MIXED')
            ? SELLER_INFO_CREDIT
            : null;
        var lpInfo = !lpApplicable.value ||
            (lpApplicable.value && lpApplicable.remark === 'MIXED')
            ? SELLER_INFO_LOYALTY
            : null;
        var showOnlyGCTotal = gcInfo && !creditChecked;
        var showOnlyLPTotal = lpInfo && !loyaltyChecked;
        if (type === LOYALTY) {
            toggleFn = this.toggleLoyalty;
            finalMarkup = createMarkup(LOYALTY_MSG, loyaltyChecked ? lpAmount : usableLoyalty, lpBalance, lpInfo, showOnlyLPTotal, toggleFn);
        }
        if (type === CREDIT) {
            toggleFn = this.toggleCredit;
            finalMarkup = createMarkup(CREDIT_MSG, creditChecked ? gcAmount : appliableCredit, gcBalance, gcInfo, showOnlyGCTotal, toggleFn);
        }
        return react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.loyaltyInfo }, finalMarkup);
    };
    BalanceAmount.prototype.getLoyaltyMarkup = function () {
        var _a = this.props.lpObj, _b = _a === void 0 ? {} : _a, loyaltyChecked = _b.loyaltyChecked, lpApplicable = _b.lpApplicable, lpBalance = _b.lpBalance;
        var lpSellerDisabled = !lpApplicable.value;
        var lpCheckboxDisabled = !(0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.isValidAmount)(lpBalance) || lpSellerDisabled;
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.loyaltyCheck },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("input", { type: "checkbox", className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.hiddenInput, " ").concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.loyaltyInput), onChange: this.toggleLoyalty }),
            loyaltyChecked ? (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_CheckboxActive_jsx__WEBPACK_IMPORTED_MODULE_9__.default, { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.checkboxActiveIcon, " ").concat(lpCheckboxDisabled ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.inputDisable : '') })) : (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_CheckboxInactive_jsx__WEBPACK_IMPORTED_MODULE_10__.default, { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.checkboxIcon, " ").concat(lpCheckboxDisabled ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.inputDisable : '') })),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null, this.getMarkupFor(LOYALTY))));
    };
    BalanceAmount.prototype.getCreditMarkup = function () {
        var _a = this.props.gcObj, gcBalance = _a.gcBalance, creditChecked = _a.creditChecked, gcApplicable = _a.gcApplicable;
        var gcSellerDisabled = !gcApplicable.value;
        var gcCheckboxDisabled = !(0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_2__.isValidAmount)(gcBalance) || gcSellerDisabled;
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.creditCheck },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("input", { type: "checkbox", className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.hiddenInput, " ").concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.creditInput), onChange: this.toggleCredit }),
            creditChecked ? (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_CheckboxActive_jsx__WEBPACK_IMPORTED_MODULE_9__.default, { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.checkboxActiveIcon, " ").concat(gcCheckboxDisabled ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.inputDisable : '') })) : (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_CheckboxInactive_jsx__WEBPACK_IMPORTED_MODULE_10__.default, { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.checkboxIcon, " ").concat(gcCheckboxDisabled ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.inputDisable : '') })),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null, this.getMarkupFor(CREDIT))));
    };
    BalanceAmount.prototype.hasCreditBalance = function (data) {
        var _a = data || this.props, gcObj = _a.gcObj, lpObj = _a.lpObj;
        var _b = gcObj.gcBalance, gcBalance = _b === void 0 ? 0 : _b;
        var _c = lpObj.lpBalance, lpBalance = _c === void 0 ? 0 : _c;
        var hasLoyalty = parseInt(lpBalance, 10) > 0;
        var hasCredit = parseInt(gcBalance, 10) > 0;
        return {
            hasLoyalty: hasLoyalty,
            hasCredit: hasCredit,
            gcBalance: gcBalance,
            lpBalance: lpBalance
        };
    };
    BalanceAmount.prototype.render = function () {
        var _a = this.hasCreditBalance(), hasLoyalty = _a.hasLoyalty, hasCredit = _a.hasCredit;
        var sectionTitle = (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.getCreditTitle)(hasLoyalty, hasCredit);
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.balanceAmountWrapper },
            hasLoyalty || hasCredit ? (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_5__.MiniHeaderNav, { header: sectionTitle })) : null,
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.balanceAmount },
                hasLoyalty ? this.getLoyaltyMarkup() : null,
                hasCredit ? this.getCreditMarkup() : null)));
    };
    return BalanceAmount;
}(react__WEBPACK_IMPORTED_MODULE_0__.default.Component));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BalanceAmount);
BalanceAmount.propTypes = {
    gcObj: (prop_types__WEBPACK_IMPORTED_MODULE_11___default().object),
    lpObj: (prop_types__WEBPACK_IMPORTED_MODULE_11___default().object),
    updateLoyalty: (prop_types__WEBPACK_IMPORTED_MODULE_11___default().func),
    updateCredit: (prop_types__WEBPACK_IMPORTED_MODULE_11___default().func),
    loyaltyInfo: (prop_types__WEBPACK_IMPORTED_MODULE_11___default().object)
};
BalanceAmount.defaultProps = {
    gcObj: {},
    lpObj: {},
    updateLoyalty: function () { },
    updateCredit: function () { },
    loyaltyInfo: {}
};


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/DeliveryAddress.js":
/*!************************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/DeliveryAddress.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ExpressCheckoutComponents */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");





var CHANGE = _expressConstants__WEBPACK_IMPORTED_MODULE_3__.default.CHANGE, ADDRESS_LIST = _expressConstants__WEBPACK_IMPORTED_MODULE_3__.default.ADDRESS_LIST;
var DeliveryAddress = function (_a) {
    var _b = _a.data, data = _b === void 0 ? {} : _b, showDetails = _a.showDetails;
    var addressType = data.addressType, _c = data.user, _d = _c === void 0 ? {} : _c, name = _d.name, mobile = _d.mobile, streetAddress = data.streetAddress, locality = data.locality, city = data.city, pincode = data.pincode;
    var addressDetails = [streetAddress];
    if (locality) {
        addressDetails.push(", ".concat(locality));
    }
    if (city) {
        addressDetails.push(", ".concat(city));
    }
    if (pincode) {
        addressDetails.push("-".concat(pincode));
    }
    var fullAddress = addressDetails.join('');
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.deliveryAddressWrapper },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_2__.MiniHeaderNav, { header: 'Address', link: CHANGE, action: showDetails, section: ADDRESS_LIST }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.addressContent },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.nameAndType },
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.fullname }, name),
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.addressType }, addressType)),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.address }, fullAddress),
            mobile && react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_1__.default.mobile }, mobile))));
};
DeliveryAddress.propTypes = {
    data: (prop_types__WEBPACK_IMPORTED_MODULE_4___default().object),
    showDetails: (prop_types__WEBPACK_IMPORTED_MODULE_4___default().func)
};
DeliveryAddress.defaultProps = {
    showDetails: function () { return void 0; }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeliveryAddress);


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckout.js":
/*!************************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckout.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var _PaymentSection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PaymentSection */ "./browser/components/cart/mobile/ExpressCheckoutContainer/PaymentSection.js");
/* harmony import */ var _DeliveryAddress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DeliveryAddress */ "./browser/components/cart/mobile/ExpressCheckoutContainer/DeliveryAddress.js");
/* harmony import */ var _ItemArrivalInfo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ItemArrivalInfo */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ItemArrivalInfo.js");
/* harmony import */ var _ActionButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ActionButton */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ActionButton.js");
/* harmony import */ var _TryAndBuyInfo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TryAndBuyInfo */ "./browser/components/cart/mobile/ExpressCheckoutContainer/TryAndBuyInfo.js");
/* harmony import */ var _payment_common_TwoFactorAuthentication__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../payment/common/TwoFactorAuthentication */ "./browser/components/payment/common/TwoFactorAuthentication/index.js");
/* harmony import */ var commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! commonBrowserUtils/Helper */ "./browser/utils/Helper/index.js");
/* harmony import */ var commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! commonBrowserUtils/PaymentConstants */ "./browser/utils/PaymentConstants.js");
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! commonUtils/GrowthHackConfigManager */ "./utils/GrowthHackConfigManager/index.js");
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! commonUtils/FeaturesManager */ "./utils/FeaturesManager/index.js");
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var _ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ExpressCheckoutComponents */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js");
/* harmony import */ var commonComp_Modal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! commonComp/Modal */ "./browser/components/common/Modal/index.js");
/* harmony import */ var commonComp_Loader__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! commonComp/Loader */ "./browser/components/common/Loader/index.js");
/* harmony import */ var commonUtils_constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! commonUtils/constants */ "./utils/constants.js");
/* harmony import */ var commonUtils_constants__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(commonUtils_constants__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var iconComp_Back_jsx__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! iconComp/Back.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/Back.jsx");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
















var HEADER_MAPPING = _expressConstants__WEBPACK_IMPORTED_MODULE_12__.default.HEADER_MAPPING;


var COD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_8__.default.COD;
var ExpressCheckout = /** @class */ (function (_super) {
    __extends(ExpressCheckout, _super);
    function ExpressCheckout() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ExpressCheckout.prototype.render = function () {
        var _this = this;
        var _a = this.props.expressCheckoutData, loyaltyData = _a.loyaltyData, resolved = _a.resolved, paymentType = _a.paymentType, finalAmount = _a.finalAmount, gcObj = _a.gcObj, lpObj = _a.lpObj, orderTotal = _a.orderTotal, instrumentData = _a.instrumentData, paymentOptions = _a.paymentOptions;
        var _b = this.props, addressData = _b.addressData, _c = _b.data, flags = _c.flags, products = _c.products, orderAddressId = _c.orderAddressId, unifiedAddressId = _c.unifiedAddressId, twoFA = _b.twoFA, cvvError = _b.cvvError, section = _b.section, showDetails = _b.showDetails, onClose = _b.onClose, serviceabilityData = _b.serviceabilityData, serviceabilityFlags = _b.serviceabilityFlags, loading = _b.loading, captchaDetails = _b.captchaDetails;
        var loyaltyChecked = lpObj.loyaltyChecked;
        var creditChecked = gcObj.creditChecked;
        var hidePayment = finalAmount === 0;
        var price = this.props.data.price;
        var hasChecked = creditChecked || loyaltyChecked;
        var loyaltyInfo = {
            orderTotal: orderTotal,
            conversion: (0,commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_9__.getGrowthHackConfigValue)('XPRESS_LOYALTY_CONV') / 100,
            loyaltyBalance: loyaltyData && loyaltyData.activePoints,
            finalAmount: finalAmount
        };
        var selectedProducts = (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_7__.getSelectedProducts)(products);
        var showPayable = paymentType === COD || finalAmount === 0;
        var balanceAmountProps = {
            gcObj: gcObj,
            lpObj: lpObj,
            updateLoyalty: this.props.updateLoyalty,
            updateCredit: this.props.updateCredit,
            loyaltyInfo: loyaltyInfo
        };
        var payableAmountProps = {
            price: price,
            hasChecked: hasChecked,
            finalAmount: finalAmount,
            showPayable: showPayable
        };
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(react__WEBPACK_IMPORTED_MODULE_0__.default.Fragment, null,
            loading && react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Loader__WEBPACK_IMPORTED_MODULE_15__.default, { show: true, backdrop: true }),
            resolved && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(react__WEBPACK_IMPORTED_MODULE_0__.default.Fragment, null,
                captchaDetails.display && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_13__.CaptchaVerification, { onClose: this.props.resetCaptcha, setCaptchaRef: this.props.setCaptchaRef, setLoader: this.props.setLoader, setCaptchaDetails: this.props.setCaptchaDetails, submit: this.props.handleCaptchaSubmit })),
                twoFA.display && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_payment_common_TwoFactorAuthentication__WEBPACK_IMPORTED_MODULE_6__.default, { email: twoFA.enableEmailOtp ? (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_7__.getProfileEmail)() : '', numbers: twoFA.mobileNumbers, paymentModes: twoFA.paymentModes, close: this.props.toggleTwoFA, handlePaymentAction: this.props.handlePaymentAction, submit: this.props.handleTwoFASubmit, errorCallback: this.props.disableTwoFA, mode: commonUtils_constants__WEBPACK_IMPORTED_MODULE_16__.pageMode.MOBILE, orderAddressId: orderAddressId, unifiedAddressId: unifiedAddressId })),
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: twoFA.display || captchaDetails.display
                        ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.hideExpressContent
                        : _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.expressContent },
                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Modal__WEBPACK_IMPORTED_MODULE_14__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.expressContent, cancelCallback: onClose, halfCard: true, cancelIconConfig: {
                            show: true,
                            className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.closeXpress
                        }, stopBackgroundScroll: true },
                        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.innerExpressContent, " ").concat(showDetails ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.slideOut : '') },
                            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.containerHeading }, "Place Order"),
                            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_DeliveryAddress__WEBPACK_IMPORTED_MODULE_2__.default, { data: addressData, showDetails: this.props.toggleDetails }),
                            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ItemArrivalInfo__WEBPACK_IMPORTED_MODULE_3__.default, { serviceabilityData: serviceabilityData, serviceabilityFlags: serviceabilityFlags, showDetails: this.props.toggleDetails }),
                            !(0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_10__.isVariantEnabled)('AOC_V2_VARIANT3') && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_TryAndBuyInfo__WEBPACK_IMPORTED_MODULE_5__.default, __assign({}, flags, { products: selectedProducts, showDetails: this.props.toggleDetails }))),
                            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_PaymentSection__WEBPACK_IMPORTED_MODULE_1__.PaymentSection, { showDetails: this.props.toggleDetails, paymentType: paymentType, paymentObj: instrumentData, paymentOptions: paymentOptions, updateCVV: this.props.updateCVV, errorMsg: cvvError, hidePayment: hidePayment, cartData: this.props.data, updateBankDiscount: this.props.updateBankDiscount, balanceAmountProps: balanceAmountProps, payableAmountProps: payableAmountProps, getNewPaymentForm: this.props.getNewPaymentForm }),
                            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ActionButton__WEBPACK_IMPORTED_MODULE_4__.default, { twoFA: twoFA, isCaptchaVisible: captchaDetails.display, expressCheckoutData: this.props.expressCheckoutData, payNow: this.props.makePayment, paymentType: paymentType })),
                        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.moreDetails, " ").concat(showDetails ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.slideIn : '') },
                            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null,
                                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.sectionHead, onClick: function () { return _this.props.toggleDetails('default'); } },
                                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_Back_jsx__WEBPACK_IMPORTED_MODULE_17__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_11__.default.backIcon }),
                                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("b", null,
                                        " ",
                                        HEADER_MAPPING[section],
                                        " ")),
                                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_13__.ArrivalDetails, { list: serviceabilityData })))))))));
    };
    return ExpressCheckout;
}(react__WEBPACK_IMPORTED_MODULE_0__.default.PureComponent));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExpressCheckout);


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js":
/*!****************************************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MiniHeaderNav": () => (/* binding */ MiniHeaderNav),
/* harmony export */   "ArrivalDetails": () => (/* binding */ ArrivalDetails),
/* harmony export */   "CaptchaVerification": () => (/* binding */ CaptchaVerification)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/get */ "../node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var commonComp_Image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! commonComp/Image */ "./browser/components/common/Image/index.js");
/* harmony import */ var commonComp_Modal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! commonComp/Modal */ "./browser/components/common/Modal/index.js");
/* harmony import */ var commonComp_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! commonComp/Button */ "./browser/components/common/Button/index.js");
/* harmony import */ var commonComp_Captcha__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! commonComp/Captcha */ "./browser/components/common/Captcha/index.js");
/* harmony import */ var commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! commonBrowserUtils/PaymentHelper */ "./browser/utils/PaymentHelper/index.js");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util */ "./browser/components/cart/mobile/ExpressCheckoutContainer/util.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();











var SUBMIT = _expressConstants__WEBPACK_IMPORTED_MODULE_8__.default.SUBMIT, CAPTCHA_REQUIRED = _expressConstants__WEBPACK_IMPORTED_MODULE_8__.default.CAPTCHA_REQUIRED;
var IMAGE_SIZE = { width: 111, height: 148 };
var ArrivalDetails = function (_a) {
    var list = _a.list;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.arrivalList }, list.map(function (item) { return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.arrivalItem, key: item.id },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.itemImg },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Image__WEBPACK_IMPORTED_MODULE_2__.default, { src: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(item, 'image.secureSrc'), width: IMAGE_SIZE.width, height: IMAGE_SIZE.height, visible: "true" })),
        "Estimated Delivery:\u00A0",
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("b", null, (0,_util__WEBPACK_IMPORTED_MODULE_7__.formatDateFromEpoch)((0,_util__WEBPACK_IMPORTED_MODULE_7__.getProductDeliveryDate)(item.shippingEstimates))))); })));
};
ArrivalDetails.propTypes = {
    list: (prop_types__WEBPACK_IMPORTED_MODULE_10___default().array)
};
var MiniHeaderNav = /** @class */ (function (_super) {
    __extends(MiniHeaderNav, _super);
    function MiniHeaderNav(props) {
        var _this = _super.call(this, props) || this;
        _this.slideOut = _this.slideOut.bind(_this);
        return _this;
    }
    MiniHeaderNav.prototype.slideOut = function () {
        var _a = this.props, action = _a.action, section = _a.section;
        if (typeof action === 'function') {
            (0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_6__.resetPaymentRetrySession)();
            action(section);
        }
    };
    MiniHeaderNav.prototype.render = function () {
        var _a = this.props, header = _a.header, link = _a.link;
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.headerNav },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null, header),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.actionLink, onClick: this.slideOut }, link)));
    };
    return MiniHeaderNav;
}(react__WEBPACK_IMPORTED_MODULE_0__.default.PureComponent));
var CaptchaVerification = function (_a) {
    var onClose = _a.onClose, setCaptchaRef = _a.setCaptchaRef, setLoader = _a.setLoader, setCaptchaDetails = _a.setCaptchaDetails, submit = _a.submit;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Modal__WEBPACK_IMPORTED_MODULE_3__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.captchaModal, cancelCallback: onClose, halfCard: true, cancelIconConfig: {
            show: true,
            className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.closeXpress
        }, stopBackgroundScroll: true },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.captchaHeader }, CAPTCHA_REQUIRED),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Captcha__WEBPACK_IMPORTED_MODULE_5__.default, { ref: setCaptchaRef, setLoader: setLoader, setCaptchaDetails: setCaptchaDetails }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Button__WEBPACK_IMPORTED_MODULE_4__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_9__.default.captchaSubmit, onClick: submit }, SUBMIT)));
};
MiniHeaderNav.propTypes = {
    header: (prop_types__WEBPACK_IMPORTED_MODULE_10___default().string),
    link: (prop_types__WEBPACK_IMPORTED_MODULE_10___default().string),
    action: (prop_types__WEBPACK_IMPORTED_MODULE_10___default().func),
    section: (prop_types__WEBPACK_IMPORTED_MODULE_10___default().string)
};
MiniHeaderNav.defaultProps = {
    action: function () { }
};



/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/ItemArrivalInfo.js":
/*!************************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/ItemArrivalInfo.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/get */ "../node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! commonUtils/GrowthHackConfigManager */ "./utils/GrowthHackConfigManager/index.js");
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! commonUtils/FeaturesManager */ "./utils/FeaturesManager/index.js");
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util.js */ "./browser/components/cart/mobile/ExpressCheckoutContainer/util.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var _ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ExpressCheckoutComponents */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");









var ItemArrivalInfo = function (props) {
    var showDetails = props.showDetails, _a = props.serviceabilityData, serviceabilityData = _a === void 0 ? [] : _a, _b = props.serviceabilityFlags, serviceabilityFlags = _b === void 0 ? {} : _b;
    var date = (0,_util_js__WEBPACK_IMPORTED_MODULE_4__.getMinDeliveryDate)(serviceabilityData);
    if (date === undefined)
        return;
    var hasMultipleItems = serviceabilityData.length > 1;
    var _c = (0,commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2__.getGrowthHackConfigValue)('XPRESS_CHECKOUT_CONFIG'), arrivalInfoForMulti = _c.arrivalInfoForMulti, arrivalInfoForSingle = _c.arrivalInfoForSingle;
    var arrivalInfoTxt = hasMultipleItems
        ? arrivalInfoForMulti
        : arrivalInfoForSingle;
    var typesApplicable = {
        EXPRESS: !!lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(serviceabilityFlags, 'expressShipping.value'),
        SDD: !!lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(serviceabilityFlags, 'sddShipping.value'),
        VALUE_SHIPPING: !!lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(serviceabilityFlags, 'valueShipping.value')
    };
    var isChargeableDelivery = ((0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__.isFeatureEnabled)('SDD') && typesApplicable.SDD) ||
        ((0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__.isFeatureEnabled)('VALUE_SHIPPING') && typesApplicable.VALUE_SHIPPING);
    var isExpress = (0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__.isFeatureEnabled)('SPEED_11') && typesApplicable.EXPRESS;
    var showMoreOptions = isChargeableDelivery && !(0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__.isVariantEnabled)('AOC_V2_VARIANT3');
    var header = showMoreOptions
        ? isExpress
            ? _expressConstants__WEBPACK_IMPORTED_MODULE_5__.default.EXPRESS_DELIVERY
            : _expressConstants__WEBPACK_IMPORTED_MODULE_5__.default.STANDARD_DELIVERY
        : _expressConstants__WEBPACK_IMPORTED_MODULE_5__.default.DELIVERY_DATE;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__.default.arrivalInfoWrapper, onClick: !showMoreOptions ? function () { return showDetails('arrival'); } : undefined },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_6__.MiniHeaderNav, { header: header, link: showMoreOptions ? _expressConstants__WEBPACK_IMPORTED_MODULE_5__.default.MORE_OPTIONS : null, action: showDetails, section: _expressConstants__WEBPACK_IMPORTED_MODULE_5__.default.ADDRESS }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__.default.arrivalInfo },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null,
                arrivalInfoTxt,
                " ",
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("b", null, date)),
            !showMoreOptions && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null,
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__.default.rightArrow }))))));
};
ItemArrivalInfo.propTypes = {
    data: (prop_types__WEBPACK_IMPORTED_MODULE_8___default().object),
    showDetails: (prop_types__WEBPACK_IMPORTED_MODULE_8___default().func)
};
ItemArrivalInfo.defaultProps = {
    data: {},
    showDetails: function () { }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ItemArrivalInfo);


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/PayableAmount.js":
/*!**********************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/PayableAmount.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! commonBrowserUtils/Helper */ "./browser/utils/Helper/index.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var iconComp_RupeeBold_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! iconComp/RupeeBold.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/RupeeBold.jsx");






var PAYABLE_TXT = _expressConstants__WEBPACK_IMPORTED_MODULE_3__.default.PAYABLE_TXT;
var PayableAmount = function (_a) {
    var finalAmount = _a.finalAmount, showPayable = _a.showPayable;
    var roundedMRP = (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_1__.currencyValue)(finalAmount);
    return (showPayable && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.finalAmount },
        PAYABLE_TXT,
        ":",
        ' ',
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("b", null,
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_RupeeBold_jsx__WEBPACK_IMPORTED_MODULE_4__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_2__.default.rupeeStyle }),
            roundedMRP),
        ' ',
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", null, "(Inc. of Tax)"))));
};
PayableAmount.propTypes = {
    data: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().object),
    hasChecked: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool),
    finalAmount: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),
    showPayable: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool)
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PayableAmount);


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/PaymentSection.js":
/*!***********************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/PaymentSection.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PaymentSection": () => (/* binding */ PaymentSection),
/* harmony export */   "PaymentSectionWrapper": () => (/* binding */ PaymentSectionWrapper),
/* harmony export */   "ExpressCashback": () => (/* binding */ ExpressCashback),
/* harmony export */   "DebitCreditCard": () => (/* binding */ DebitCreditCard),
/* harmony export */   "PaymentModes": () => (/* binding */ PaymentModes),
/* harmony export */   "PaymentSectionInfo": () => (/* binding */ PaymentSectionInfo)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/get */ "../node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var commonComp_Sprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! commonComp/Sprite */ "./browser/components/common/Sprite/index.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util.js */ "./browser/components/cart/mobile/ExpressCheckoutContainer/util.js");
/* harmony import */ var _payment_common_Cashback__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../../payment/common/Cashback */ "./browser/components/payment/common/Cashback/index.js");
/* harmony import */ var commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! commonBrowserUtils/PaymentConstants */ "./browser/utils/PaymentConstants.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var _ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ExpressCheckoutComponents */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js");
/* harmony import */ var _BalanceAmount__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./BalanceAmount */ "./browser/components/cart/mobile/ExpressCheckoutContainer/BalanceAmount.js");
/* harmony import */ var _PayableAmount__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./PayableAmount */ "./browser/components/cart/mobile/ExpressCheckoutContainer/PayableAmount.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
/* harmony import */ var iconComp_Info_jsx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! iconComp/Info.jsx */ "../node_modules/@myntra/m-comp/react/SVGIcon/Info.jsx");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};






var UPI = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.UPI, BANK_MAP = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.BANK_MAP, VPA = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.VPA, CARD_TYPE = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.CARD_TYPE, SAVED_INSTRUMENT = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.SAVED_INSTRUMENT;

var PAY_VIA = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.PAY_VIA, CHANGE = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.CHANGE, CASHBACK_ERROR = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.CASHBACK_ERROR, OFFER_ELIGIBILITY = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.OFFER_ELIGIBILITY, CASHBACK_RETRY_MSG = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.CASHBACK_RETRY_MSG, VALID_PAYMENTS = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.VALID_PAYMENTS, KLASS_OVERRIDE_LIST = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.KLASS_OVERRIDE_LIST, MAESTRO = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.MAESTRO;





var PaymentSectionWrapper = function (props) {
    var showDetails = props.showDetails, paymentObj = props.paymentObj, paymentType = props.paymentType, updateCVV = props.updateCVV, errorMsg = props.errorMsg, updateBankDiscount = props.updateBankDiscount, cartData = props.cartData, hidePayment = props.hidePayment, paymentOptions = props.paymentOptions;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.paymentSectionWrapper, " ").concat(hidePayment ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.hidePayments : null) },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_7__.MiniHeaderNav, { header: PAY_VIA, link: CHANGE, action: showDetails, section: 'payment' }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(PaymentSectionInfo, { paymentObj: paymentObj, paymentType: paymentType, updateCVV: updateCVV, errorMsg: errorMsg, updateBankDiscount: updateBankDiscount, cartData: cartData, paymentOptions: paymentOptions })));
};
var ExpressCashback = function (_a) {
    var data = _a.data;
    var state = data.state, icbRetryCount = data.icbRetryCount, onClickEligibility = data.onClickEligibility, totalAmount = data.totalAmount;
    if (lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(state, 'icb.show', false)) {
        var _b = state.icb, code = _b.code, message = _b.message, error = _b.error;
        if (error) {
            if (state.currentRetryCount <= icbRetryCount) {
                return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null,
                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: totalAmount ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.errorMsg : _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.hideExpressContent }, CASHBACK_ERROR),
                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.retryBtn, onClick: onClickEligibility }, OFFER_ELIGIBILITY)));
            }
            else {
                return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: totalAmount ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.errorMsg : _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.hideExpressContent }, CASHBACK_RETRY_MSG));
            }
        }
        else if (code) {
            // TODO :- check this if it is required or not
            // return <div className={Style.cashbackInfo}>{message}</div>;
            return react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cashbackInfo });
        }
        else if (message) {
            return react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cashbackTxt }, message);
        }
    }
    else if (state.deff && state.deff.show) {
        return react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cashbackTxt }, state.deff.message);
    }
    return null;
};
var DebitCreditCard = function (_a) {
    var _b = _a.card, card = _b === void 0 ? {} : _b, updateCVV = _a.updateCVV, errorMsg = _a.errorMsg;
    var cardImageType = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.AVAILABLE_CARD_IMAGES.indexOf(card.cardType) !== -1
        ? "card-".concat(card.cardType.toLowerCase())
        : 'card-default';
    var isMaestro = (card.cardType || '').toLowerCase() === MAESTRO;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cardDetails },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.bankInfo },
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.bankCardType },
                    card.bankName,
                    " ",
                    card.productType),
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.maskedCardno }, card.paymentMaskedNumber)),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cardHolder },
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cardLogoName },
                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Sprite__WEBPACK_IMPORTED_MODULE_2__.default, { name: cardImageType }),
                    react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.holderName }, card.cardHolderName)),
                react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("input", { onChange: updateCVV, className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cvvInput, " ").concat(errorMsg ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cvvError : null), placeholder: "CVV", type: "text", id: "cvvInput", maxLength: "4", size: "4", autoComplete: "off", inputmode: "numeric" }))),
        isMaestro && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.optionalCVV },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(iconComp_Info_jsx__WEBPACK_IMPORTED_MODULE_11__.default, { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.infoIcon }),
            "CVV not required if not mentioned on your card")),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", null, errorMsg ? react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.errorMsg }, errorMsg) : null)));
};
var PaymentModes = function (_a) {
    var instrumentsData = _a.instrumentsData, paymentType = _a.paymentType;
    var _b = (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.getSpriteObj)(instrumentsData, paymentType), bankName = _b.bankName, spriteName = _b.spriteName, paymentName = _b.paymentName;
    var mappedName = BANK_MAP[bankName.toLowerCase()];
    var hasOverride = KLASS_OVERRIDE_LIST.indexOf(mappedName) !== -1;
    var overrideKlass = 'override-bankList';
    var klass = hasOverride
        ? overrideKlass
        : "override-".concat(mappedName || 'bank');
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.paymentCompany },
        spriteName && react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Sprite__WEBPACK_IMPORTED_MODULE_2__.default, { name: spriteName, className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default[klass] }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: "".concat(!spriteName ? _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.cod : '') },
            bankName,
            " ",
            paymentType !== UPI && paymentName)));
};
var SavedUPI = function (_a) {
    var instrumentsData = _a.instrumentsData;
    var _b = (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.getSpriteObj)(instrumentsData, SAVED_INSTRUMENT), spriteName = _b.spriteName, payerName = _b.payerName, vpa = _b.vpa, bankName = _b.bankName;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.savedUPI },
        spriteName && (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(commonComp_Sprite__WEBPACK_IMPORTED_MODULE_2__.default, { name: spriteName, className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default["override-".concat(bankName)] })),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.upiDetails },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.vpa }, vpa),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.payerName }, payerName))));
};
var PaymentSectionInfo = function (_a) {
    var paymentObj = _a.paymentObj, _b = _a.paymentType, paymentType = _b === void 0 ? '' : _b, updateCVV = _a.updateCVV, errorMsg = _a.errorMsg, cartData = _a.cartData, updateBankDiscount = _a.updateBankDiscount;
    var defaultSavedInstrument = (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.getDefaultSavedInstrument)(paymentObj);
    var paymentInstrumentType = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(defaultSavedInstrument, 'paymentInstrumentType', '');
    if (paymentType === SAVED_INSTRUMENT && paymentInstrumentType === CARD_TYPE) {
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.paymentSectionInfo },
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(DebitCreditCard, { card: defaultSavedInstrument, updateCVV: updateCVV, errorMsg: errorMsg }),
            react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_payment_common_Cashback__WEBPACK_IMPORTED_MODULE_4__.default, { cartData: cartData, instrumentHandle: defaultSavedInstrument.instrumentId, updateBankDiscount: updateBankDiscount, render: function (data) { return react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(ExpressCashback, __assign({}, data)); } })));
    }
    if (paymentType === SAVED_INSTRUMENT && paymentInstrumentType === VPA) {
        return react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(SavedUPI, { instrumentsData: paymentObj });
    }
    if (VALID_PAYMENTS.indexOf(paymentType) !== -1) {
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(PaymentModes, { instrumentsData: paymentObj, paymentType: paymentType }));
    }
    else
        return null;
};
var PaymentSection = function (props) {
    var hidePayment = props.hidePayment, _a = props.balanceAmountProps, gcObj = _a.gcObj, lpObj = _a.lpObj, updateLoyalty = _a.updateLoyalty, updateCredit = _a.updateCredit, loyaltyInfo = _a.loyaltyInfo, _b = props.payableAmountProps, price = _b.price, hasChecked = _b.hasChecked, finalAmount = _b.finalAmount, showPayable = _b.showPayable, getNewPaymentForm = props.getNewPaymentForm, paymentObj = props.paymentObj, paymentType = props.paymentType, updateBankDiscount = props.updateBankDiscount, cartData = props.cartData, showDetails = props.showDetails, errorMsg = props.errorMsg, updateCVV = props.updateCVV, paymentOptions = props.paymentOptions;
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_10__.default.paymentOptions) },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(PaymentSectionWrapper, { paymentObj: paymentObj, paymentType: paymentType, updateCVV: updateCVV, errorMsg: errorMsg, updateBankDiscount: updateBankDiscount, cartData: cartData, showDetails: showDetails, hidePayment: hidePayment, paymentOptions: paymentOptions }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_BalanceAmount__WEBPACK_IMPORTED_MODULE_8__.default, { gcObj: gcObj, lpObj: lpObj, updateLoyalty: updateLoyalty, updateCredit: updateCredit, loyaltyInfo: loyaltyInfo }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_PayableAmount__WEBPACK_IMPORTED_MODULE_9__.default, { data: price, hasChecked: hasChecked, finalAmount: finalAmount, showPayable: showPayable }),
        getNewPaymentForm()));
};



/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/TryAndBuyInfo.js":
/*!**********************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/TryAndBuyInfo.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/get */ "../node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! commonUtils/FeaturesManager */ "./utils/FeaturesManager/index.js");
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! commonUtils/KVPairManager */ "./utils/KVPairManager/index.js");
/* harmony import */ var commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! commonBrowserUtils/Helper */ "./browser/utils/Helper/index.js");
/* harmony import */ var _ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ExpressCheckoutComponents */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckoutComponents/index.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");








var VIEW = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.VIEW, TRY_AND_BUY = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.TRY_AND_BUY;

var TryAndBuyInfo = function (_a) {
    var tryNBuyApplicable = _a.tryNBuyApplicable, _b = _a.products, products = _b === void 0 ? [] : _b, showDetails = _a.showDetails;
    var remark = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(tryNBuyApplicable, 'remark');
    var enabled = (0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_2__.isFeatureEnabled)('TRY_AND_BUY') && remark === 'NO_ISSUE';
    if (!enabled) {
        return null;
    }
    var opted = (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_4__.getTryAndBuyOpted)(products);
    var price = Number((0,commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_3__.getKVPairValue)('TNB_PRICE') || 0);
    var message = '';
    var _c = (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_4__.getTryAndBuyDetails)(products), tnbEligibleItems = _c.tnbEligibleItems, tnbEligibleTotalQuantity = _c.tnbEligibleTotalQuantity, count = _c.count;
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {
        triggerEvent('XPRESS_TRY_AND_BUY_LOAD', {
            custom: {
                widget: {
                    name: 'express-checkout',
                    type: 'card'
                },
                widget_items: {
                    name: 'try-and-buy-load',
                    type: 'button'
                },
                custom: {
                    v1: (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_4__.getUidx)(),
                    v2: count,
                    v3: tnbEligibleItems.length,
                    v4: price
                }
            }
        });
    }, [products]);
    if (tnbEligibleItems.length === products.length) {
        message = 'All items are eligible';
    }
    else {
        message = "".concat(tnbEligibleTotalQuantity, " of ").concat(count, " items are eligible");
    }
    var header = (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", null,
        "Try & Buy for ",
        price ? react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", null,
            "\u20B9",
            price) : 'Free',
        ' ',
        opted && react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("span", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__.default.greenText }, "(Applied Successfully)")));
    return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__.default.tnbContainer },
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckoutComponents__WEBPACK_IMPORTED_MODULE_5__.MiniHeaderNav, { header: header, link: VIEW, action: showDetails, section: TRY_AND_BUY }),
        react__WEBPACK_IMPORTED_MODULE_0__.default.createElement("div", { className: _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_7__.default.tnbMessage }, message)));
};
TryAndBuyInfo.propTypes = {
    products: (prop_types__WEBPACK_IMPORTED_MODULE_8___default().array),
    showDetails: (prop_types__WEBPACK_IMPORTED_MODULE_8___default().func)
};
TryAndBuyInfo.defaultProps = {
    products: [],
    showDetails: function () { }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TryAndBuyInfo);


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js":
/*!*************************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! commonUtils/KVPairManager */ "./utils/KVPairManager/index.js");
/* harmony import */ var commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! commonBrowserUtils/PaymentConstants */ "./browser/utils/PaymentConstants.js");


var COD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_1__.default.COD, NETBANKING = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_1__.default.NETBANKING, UPI = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_1__.default.UPI, WALLET_TYPE = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_1__.default.WALLET_TYPE, SAVED_INSTRUMENT = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_1__.default.SAVED_INSTRUMENT;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    HEADER_MAPPING: {
        addressList: 'Select Address',
        payments: 'Change Payment',
        arrival: 'Expected Delivery Time',
        default: ''
    },
    PAYMENT_NAME_MAP: {
        netbanking: 'Net Banking',
        upi: 'UPI',
        wallet: 'Wallet',
        cod: 'Pay On Delivery'
    },
    DEFAULT: 'default',
    ARRIVAL: 'arrival',
    PAYMENT: 'payment',
    ADDRESS: 'address',
    ADDRESS_LIST: 'addressList',
    TRY_AND_BUY: 'tryAndBuy',
    MODE: 'mobile',
    SELLER_INFO_CREDIT: "Myntra Credit is not applicable on any items sold by ".concat((0,commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_0__.getKVPairValue)('PAYMENT_SELLERNAME')),
    SELLER_INFO_LOYALTY: "MynCash is not applicable on any items sold by ".concat((0,commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_0__.getKVPairValue)('PAYMENT_SELLERNAME')),
    LOYALTY_MSG: 'Use MynCash',
    CREDIT_MSG: 'Use Myntra Credits',
    LOYALTY: 'loyalty',
    CREDIT: 'credit',
    PAYABLE_TXT: 'Amount Payable',
    PAY_VIA: 'Pay Via',
    CHANGE: 'Change',
    VIEW: 'View',
    SWIPE_FACTOR: 0.4,
    SWIPE_TO_ORDER: 'SWIPE TO PLACE ORDER',
    PLACE_ORDER: 'PLACE ORDER NOW',
    PAY: 'PAY',
    CASHBACK_ERROR: 'Could not check the discount amount for this card. Please check again.',
    OFFER_ELIGIBILITY: ' Check Offer Eligibility',
    CASHBACK_RETRY_MSG: ' Can not check for bank discount eligibility, please retry after 30 minutes. T&C Apply',
    VALID_PAYMENTS: [UPI, COD, NETBANKING, WALLET_TYPE, SAVED_INSTRUMENT],
    PHONEPE: 'phonepe',
    MAESTRO: 'maestro',
    KLASS_OVERRIDE_LIST: [
        'hdfc',
        'icici',
        'kotak',
        'sbi',
        'pnb',
        'axis',
        'payu',
        'airtelmoney',
        'googlepay',
        'cod'
    ],
    XPRESS_EVENT_MAP: {
        address: 'XPRESS_ARRIVAL_MORE_OPTIONS',
        addressList: 'XPRESS_ADDRESS_CLICK',
        arrival: 'XPRESS_ARRIVAL_INFO',
        payment: 'XPRESS_PAYMENT_CLICK',
        tryAndBuy: 'XPRESS_TRY_AND_BUY_CLICK'
    },
    STANDARD_DELIVERY: 'Standard Delivery (Free)',
    EXPRESS_DELIVERY: 'Express Delivery (Free)',
    MORE_OPTIONS: 'More Options',
    DELIVERY_DATE: 'Delivery Date',
    SUBMIT: 'SUBMIT',
    CAPTCHA_REQUIRED: 'Captcha Verification required'
});


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/index.js":
/*!**************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/preact/compat/dist/compat.module.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/get */ "../node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/pick */ "../node_modules/lodash/pick.js");
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEmpty */ "../node_modules/lodash/isEmpty.js");
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var commonBrowserUtils_AddressManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! commonBrowserUtils/AddressManager */ "./browser/utils/AddressManager.js");
/* harmony import */ var commonBrowserUtils_PaymentsManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! commonBrowserUtils/PaymentsManager */ "./browser/utils/PaymentsManager.js");
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! commonUtils/FeaturesManager */ "./utils/FeaturesManager/index.js");
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var commonBrowserUtils_CreditsManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! commonBrowserUtils/CreditsManager */ "./browser/utils/CreditsManager.js");
/* harmony import */ var commonBrowserUtils_ProfileManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! commonBrowserUtils/ProfileManager */ "./browser/utils/ProfileManager.js");
/* harmony import */ var commonBrowserUtils_priceBreakupFields__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! commonBrowserUtils/priceBreakupFields */ "./browser/utils/priceBreakupFields.js");
/* harmony import */ var _payment_common_PayNowHandler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../payment/common/PayNowHandler */ "./browser/components/payment/common/PayNowHandler/index.js");
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! commonUtils/GrowthHackConfigManager */ "./utils/GrowthHackConfigManager/index.js");
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./util.js */ "./browser/components/cart/mobile/ExpressCheckoutContainer/util.js");
/* harmony import */ var commonBrowserUtils_transformPriceDetails__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! commonBrowserUtils/transformPriceDetails */ "./browser/utils/transformPriceDetails.js");
/* harmony import */ var commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! commonBrowserUtils/Helper */ "./browser/utils/Helper/index.js");
/* harmony import */ var commonBrowserUtils_CartHelper__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! commonBrowserUtils/CartHelper */ "./browser/utils/CartHelper/index.js");
/* harmony import */ var commonBrowserUtils_AddressHelper__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! commonBrowserUtils/AddressHelper */ "./browser/utils/AddressHelper/index.js");
/* harmony import */ var commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! commonBrowserUtils/PaymentHelper */ "./browser/utils/PaymentHelper/index.js");
/* harmony import */ var commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! commonBrowserUtils/PaymentConstants */ "./browser/utils/PaymentConstants.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");
/* harmony import */ var _ExpressCheckout__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ExpressCheckout */ "./browser/components/cart/mobile/ExpressCheckoutContainer/ExpressCheckout.js");
/* harmony import */ var _expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./expresscheckout.base.css */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expresscheckout.base.css");
/*
 *
 * This file acts as a wrapper for the entire expresscheckout component and manages to get all the required data
 * from relevant API's, and consolidates the data into the react state, in the form of objects, which are easy to pass as
 * props to the individual react sub components that get rendered inside ExpressCheckout.js file
 *
 */
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};





// Data Managers















var SAVED_INSTRUMENT = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.SAVED_INSTRUMENT, CARD_TYPE = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.CARD_TYPE, CREDIT_CARD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.CREDIT_CARD, VPA = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.VPA, NETBANKING = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.NETBANKING, UPI = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.UPI, WALLET_PM_NAME = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.WALLET_PM_NAME, LOYALTY_POINTS = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.LOYALTY_POINTS, MYNTRA_CREDIT = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.MYNTRA_CREDIT, COD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_18__.default.COD;



var LOYALTY = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.LOYALTY, CREDIT = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.CREDIT, MAESTRO = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.MAESTRO, XPRESS_EVENT_MAP = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.XPRESS_EVENT_MAP, DEFAULT = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.DEFAULT, ADDRESS = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.ADDRESS, ADDRESS_LIST = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.ADDRESS_LIST, ARRIVAL = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.ARRIVAL, PAYMENT = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.PAYMENT, TRY_AND_BUY = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.TRY_AND_BUY, PHONEPE = _expressConstants__WEBPACK_IMPORTED_MODULE_19__.default.PHONEPE;
var xpressMethods = [
    'updateCredit',
    'updateLoyalty',
    'onExpressError',
    'setOrderAddress',
    'refreshPaymentOptions',
    'onClose',
    'toggleDetails',
    'makePayment',
    'getNewPaymentForm',
    'updateBankDiscount',
    'updateCVV',
    'handleTwoFASubmit',
    'disableTwoFA',
    'handlePaymentAction',
    'toggleTwoFA',
    'blockTwoFAToggle',
    'initExpressCheckoutData',
    'triggerSuccessPaymentEvent',
    'clearExpressHistory',
    'setCaptchaRef',
    'setCaptchaDetails',
    'handleCaptchaSubmit',
    'resetCaptcha'
];
var ExpressCheckoutContainer = /** @class */ (function (_super) {
    __extends(ExpressCheckoutContainer, _super);
    function ExpressCheckoutContainer(props) {
        var _this = _super.call(this, props) || this;
        _this.isBlockTwoFAToggle = true;
        _this.state = {
            installedApps: [],
            upiIntentEnabled: false,
            loading: false,
            error: null,
            expressCheckoutResolved: false,
            showDetails: false,
            section: 'default',
            cvv: null,
            cvvError: null,
            twoFA: {
                display: false,
                callback: function () { },
                otp: null,
                disabled: false,
                mobileNumbers: null,
                enableEmailOtp: true,
                paymentModes: []
            },
            twoFAResponse: {},
            captchaDetails: {
                display: false,
                id: null,
                code: null,
                callback: function () { }
            },
            expressCheckoutData: {
                instrumentData: {},
                myntraInstrumentsData: {},
                paymentOptions: {},
                balanceData: {
                    GC: {},
                    LP: {}
                },
                gcObj: {
                    gcBalance: 0,
                    gcAmount: 0,
                    gcApplicable: false,
                    creditChecked: false
                },
                lpObj: {
                    lpBalance: 0,
                    lpAmount: 0,
                    lpApplicable: false,
                    loyaltyChecked: false
                },
                resolved: false,
                paymentType: null,
                finalAmount: 0,
                bankDiscount: 0,
                cashbackObj: null,
                orderTotal: 0
            }
        };
        _this.cvv = null;
        _this.cartChanged = false;
        __spreadArray(__spreadArray([], xpressMethods, true), [
            'initExpressCheckout',
            'updateCreditStatus',
            'initExpressCheckoutData',
            'getModeAttributes',
            'updateExpressState',
            'onCreditSuccessUpdate',
            'onCreditFailure',
            'addMyntraInstrumentsData',
            'getFinalAmount',
            'getPriceDetails',
            'getCreditsBalance',
            'setCreditsBalance',
            'setInstalledAppsConfig',
            'setTwoFADetails',
            'redirectToPaymentError'
        ], false).forEach(function (method) { return (_this[method] = _this[method].bind(_this)); });
        return _this;
    }
    ExpressCheckoutContainer.prototype.componentDidMount = function () {
        (0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.resetPaymentRetrySession)();
        this.setInstalledAppsConfig();
        commonBrowserUtils_ProfileManager__WEBPACK_IMPORTED_MODULE_8__.default.fetchDetails(this.initExpressCheckout);
    };
    ExpressCheckoutContainer.prototype.setInstalledAppsConfig = function () {
        var _this = this;
        this.props.setLoader(true, function () {
            (0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.getInstalledAppsPromise)().then(function (_a) {
                var installedApps = _a.installedApps, upiSDKEnabled = _a.upiSDKEnabled;
                _this.setState({
                    installedApps: installedApps,
                    upiIntentEnabled: upiSDKEnabled && (0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__.isFeatureEnabled)('UPI_INTENT_ENABLED')
                });
                _this.props.setLoader(false);
            });
        });
    };
    ExpressCheckoutContainer.prototype.hasCartChanged = function (prevProps) {
        return prevProps.cartData.modifiedAt !== this.props.cartData.modifiedAt;
    };
    ExpressCheckoutContainer.prototype.componentDidUpdate = function (prevProps) {
        if (this.hasCartChanged(prevProps)) {
            this.cartChanged = true;
        }
        if (prevProps.showExpressCheckoutHalfCard !==
            this.props.showExpressCheckoutHalfCard) {
            if (this.props.showExpressCheckoutHalfCard) {
                this.state.expressCheckoutResolved && !this.cartChanged
                    ? this.resolveExpressCheckout()
                    : this.handleExpressCheckout(); // Prevents calling API again if its already resolved
            }
        }
    };
    ExpressCheckoutContainer.prototype.getFinalAmount = function (bankDiscount, price) {
        var priceWithBankDiscount = __assign(__assign({}, price), { instruments: {
                data: __spreadArray(__spreadArray([], price.instruments.data, true), [{ name: 'bank', value: bankDiscount }], false)
            } });
        return (0,commonBrowserUtils_transformPriceDetails__WEBPACK_IMPORTED_MODULE_13__.getTotal)(priceWithBankDiscount, (0,commonBrowserUtils_priceBreakupFields__WEBPACK_IMPORTED_MODULE_9__.getPaymentFields)());
    };
    ExpressCheckoutContainer.prototype.getTwoFAData = function (options) {
        var paymentOptions = this.state.expressCheckoutData.paymentOptions;
        var loyaltyInstrument = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getPaymentInstrumentByType)(options || paymentOptions, LOYALTY_POINTS);
        var creditInstrument = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getPaymentInstrumentByType)(options || paymentOptions, MYNTRA_CREDIT);
        var mcTwoFAData = (0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.getInstrumentTwoFAData)(lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(creditInstrument, 'paymentInstrumentDetails'));
        var lpTwoFAData = (0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.getInstrumentTwoFAData)(lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(loyaltyInstrument, 'paymentInstrumentDetails'));
        return {
            lpTwoFAData: lpTwoFAData,
            mcTwoFAData: mcTwoFAData
        };
    };
    ExpressCheckoutContainer.prototype.setTwoFADetails = function (data) {
        this.setState({
            twoFAResponse: data
        });
    };
    ExpressCheckoutContainer.prototype.setCaptchaRef = function (node) {
        this.captchaComp = node;
    };
    ExpressCheckoutContainer.prototype.setCaptchaDetails = function (data, done) {
        var _this = this;
        if (done === void 0) { done = function () { }; }
        this.setState(function (prevState) { return ({
            captchaDetails: __assign(__assign({}, prevState.captchaDetails), data)
        }); }, function () {
            _this.props.setLoader(false);
            _this.state.captchaDetails.callback();
            done();
        });
    };
    ExpressCheckoutContainer.prototype.handleCaptchaSubmit = function () {
        this.captchaComp.submitWithCaptcha(function () { });
    };
    ExpressCheckoutContainer.prototype.resetCaptcha = function () {
        this.setState({
            captchaDetails: {
                display: false,
                id: null,
                code: null,
                callback: function () { }
            }
        });
    };
    ExpressCheckoutContainer.prototype.updateCreditStatus = function (loyalty, credit) {
        if (loyalty === void 0) { loyalty = {}; }
        if (credit === void 0) { credit = {}; }
        var cartData = this.props.cartData;
        var expressCheckoutData = this.state.expressCheckoutData;
        var _a = loyalty.activePoints, activePoints = _a === void 0 ? 0 : _a;
        var _b = credit.totalBalance, totalBalance = _b === void 0 ? 0 : _b;
        var appliedGC = (0,commonBrowserUtils_CartHelper__WEBPACK_IMPORTED_MODULE_15__.getAppliedInstrument)('giftcard', cartData);
        var appliedLP = (0,commonBrowserUtils_CartHelper__WEBPACK_IMPORTED_MODULE_15__.getAppliedInstrument)('loyaltypoints', cartData);
        var mcTwoFAData = {
            enable: !!appliedGC
        };
        var lpTwoFAData = {
            enable: !!appliedLP
        };
        var giftcardApplicable = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(cartData, 'flags.giftcardApplicable', {});
        var loyaltyPointsApplicable = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(cartData, 'flags.loyaltyPointsApplicable', {});
        var gcObj = {
            gcBalance: totalBalance,
            gcAmount: appliedGC ? appliedGC.value : 0,
            gcApplicable: giftcardApplicable,
            creditChecked: !!appliedGC
        };
        var lpObj = {
            lpBalance: activePoints,
            lpAmount: appliedLP ? appliedLP.value : 0,
            lpApplicable: loyaltyPointsApplicable,
            loyaltyChecked: !!appliedLP
        };
        this.addMyntraInstrumentsData({
            auto_giftcard_used: appliedGC ? 'true' : '',
            auto_giftcard_amount: appliedGC ? appliedGC.value : '0',
            giftcard_type: appliedGC ? 'myntracredit' : '',
            twofa_mc_data: mcTwoFAData,
            twofa_lp_data: lpTwoFAData,
            useloyaltypoints: appliedLP ? 'Y' : 'N',
            paynowInstrumentsData: {
                autoGiftCardAmount: appliedGC ? appliedGC.value : '0',
                autoGiftCardUsed: appliedGC ? 'true' : '',
                giftcardType: appliedGC ? 'myntracredit' : '',
                useloyaltypoints: appliedLP ? 'Y' : 'N',
                myntraCreditEligible: appliedGC ? 'true' : '',
                myntraCreditAmount: appliedGC ? appliedGC.value : '0'
            }
        });
        // Just passing gcObj wasn't causing a re-render, hence extending it using initial state
        this.updateExpressState({
            gcObj: Object.assign(expressCheckoutData.gcObj, gcObj),
            lpObj: Object.assign(expressCheckoutData.lpObj, lpObj)
        });
    };
    ExpressCheckoutContainer.prototype.getPriceDetails = function () {
        var _a = this.props.cartData, price = _a.price, _b = _a.shippingData, method = _b.method, shippingApplicableCharge = _b.shippingApplicableCharge, flags = _a.flags;
        var priceDetails = (0,commonBrowserUtils_transformPriceDetails__WEBPACK_IMPORTED_MODULE_13__.transformPriceDetails)(price, (0,commonBrowserUtils_priceBreakupFields__WEBPACK_IMPORTED_MODULE_9__.getPaymentFields)(), {
            shippingMethod: method,
            freeEarlyAccess: (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.isFreeEarlyAccess)(lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(flags, 'coverFeeApplicable.remark'))
        }, {
            shipping: { shippingApplicableCharge: shippingApplicableCharge }
        }) || [];
        return priceDetails;
    };
    ExpressCheckoutContainer.prototype.getEventRelatedData = function () {
        var _a = this.state.expressCheckoutData, _b = _a.balanceData, creditData = _b.GC, loyaltyData = _b.LP, paymentType = _a.paymentType, instrumentData = _a.instrumentData;
        var _c = this.props, addressData = _c.addressData, serviceabilityData = _c.serviceabilityData;
        var addressType = addressData.addressType;
        var _d = this.props.cartData, cartId = _d.id, products = _d.products;
        var subTotal = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.props.cartData, 'price', {}).subTotal;
        var uidx = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(addressData, 'user.uidx');
        var activePoints = loyaltyData.activePoints;
        var totalBalance = creditData.totalBalance;
        var hasLoyalty = parseInt(activePoints, 10) > 0;
        var hasCredit = parseInt(totalBalance, 10) > 0;
        var paymentInstrumentType = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(instrumentData, 'paymentInstrumentDetails.data.0.paymentInstrumentType', '');
        var bankData;
        if (paymentType === SAVED_INSTRUMENT &&
            paymentInstrumentType === CARD_TYPE) {
            bankData = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getDefaultSavedInstrument)(instrumentData);
        }
        else {
            bankData = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getSpriteObj)(instrumentData, paymentType);
        }
        var bankName = bankData.bankName;
        var productIds = products.map(function (product) { return "".concat(product.id); }).join('_');
        var minDelivery = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getMinDeliveryDate)(this.props.serviceabilityData);
        var maxDelivery = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getMaxDeliveryDate)(this.props.serviceabilityData);
        return {
            bankName: bankName,
            hasLoyalty: hasLoyalty,
            hasCredit: hasCredit,
            uidx: uidx,
            addressType: addressType,
            paymentType: paymentType,
            cartCount: serviceabilityData.length,
            cartId: cartId,
            productIds: productIds,
            minDelivery: minDelivery,
            maxDelivery: maxDelivery,
            subTotal: subTotal
        };
    };
    ExpressCheckoutContainer.prototype.toggleDetails = function (section) {
        if (section === void 0) { section = DEFAULT; }
        var sections = [
            DEFAULT,
            ADDRESS,
            ADDRESS_LIST,
            ARRIVAL,
            PAYMENT,
            TRY_AND_BUY
        ];
        if (sections.indexOf(section) === -1)
            return;
        var _a = this.state.expressCheckoutData, paymentType = _a.paymentType, finalAmount = _a.finalAmount;
        var _b = this.getEventRelatedData(), bankName = _b.bankName, addressType = _b.addressType, uidx = _b.uidx, cartCount = _b.cartCount, hasCredit = _b.hasCredit, hasLoyalty = _b.hasLoyalty, cartId = _b.cartId, productIds = _b.productIds, minDelivery = _b.minDelivery, maxDelivery = _b.maxDelivery, subTotal = _b.subTotal;
        var customVariables = {};
        var widgetName;
        var eventTitle = XPRESS_EVENT_MAP[section];
        if (section === ADDRESS_LIST || section === PAYMENT) {
            customVariables = {
                v1: uidx,
                v2: "".concat(paymentType, ",").concat(bankName, ",").concat(addressType, ",").concat(hasLoyalty ? 'loyalty' : '', ",").concat(hasCredit ? 'credit' : '')
            };
            widgetName = "change-".concat(section === ADDRESS_LIST ? 'address' : 'payment');
        }
        else if (section === ARRIVAL) {
            customVariables = {
                v1: productIds,
                v2: cartCount,
                v3: minDelivery,
                v4: maxDelivery
            };
            widgetName = 'check-delivery';
        }
        else if (section === TRY_AND_BUY) {
            widgetName = 'try-and-buy-click';
            customVariables = {
                v1: uidx
            };
        }
        else if (section === ADDRESS) {
            widgetName = 'more_options-expresscheckout';
            customVariables = {
                v1: subTotal
            };
        }
        if (section !== DEFAULT) {
            triggerEvent(eventTitle, {
                custom: {
                    widget: {
                        name: 'express-checkout',
                        type: 'card',
                        data_set: {
                            data: [
                                {
                                    entity_type: 'cart',
                                    enitity_id: cartId,
                                    entity_name: finalAmount
                                }
                            ]
                        }
                    },
                    widget_items: {
                        name: widgetName,
                        type: 'button'
                    },
                    custom: customVariables,
                    event_type: 'widgetItemClick'
                }
            });
        }
        if (section === ADDRESS_LIST) {
            this.props.history && (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.navigateBack)(this.props.history);
            setTimeout(commonBrowserUtils_AddressHelper__WEBPACK_IMPORTED_MODULE_16__.redirectToAddressSubpage, 1, 'list');
            return;
        }
        else if (section === TRY_AND_BUY || section === ADDRESS) {
            this.props.history && (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.navigateBack)(this.props.history);
            setTimeout(commonBrowserUtils_AddressHelper__WEBPACK_IMPORTED_MODULE_16__.redirectToAddress, 1);
            return;
        }
        else if (section === PAYMENT) {
            this.props.history && (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.navigateBack)(this.props.history);
            setTimeout(commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.redirectToPayment, 1);
            return;
        }
        this.setState(function (prevState) {
            var showDetails = prevState.showDetails;
            return {
                showDetails: !showDetails,
                section: section
            };
        });
    };
    /* Neeeded for 2FA form */
    ExpressCheckoutContainer.prototype.handlePaymentAction = function (action, data, options, onSuccess, onError) {
        var _this = this;
        if (options === void 0) { options = {}; }
        commonBrowserUtils_PaymentsManager__WEBPACK_IMPORTED_MODULE_5__.default[action](data, function (res) {
            onSuccess && onSuccess(res);
        }, function (err) {
            _this.setState({ loading: false, error: err });
            onError ? onError(err) : (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.errorNotification)(options);
        });
    };
    ExpressCheckoutContainer.prototype.toggleTwoFA = function (state) {
        if (state === void 0) { state = {}; }
        this.props.setLoader(false);
        this.state.twoFA.display && triggerEvent('CLOSE_TWOFA');
        this.setState(function (prevState) { return ({
            twoFA: __assign(__assign(__assign({}, prevState.twoFA), state), { display: !prevState.twoFA.display }),
            loading: false
        }); });
    };
    ExpressCheckoutContainer.prototype.blockTwoFAToggle = function () {
        this.props.setLoader(false);
        this.state.twoFA.display && triggerEvent('CLOSE_TWOFA');
        this.setState({
            loading: false
        });
    };
    ExpressCheckoutContainer.prototype.disableTwoFA = function () {
        this.setState(function (prevState) { return ({
            twoFA: __assign(__assign({}, prevState.twoFA), { display: false, disabled: true })
        }); });
        (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.errorNotification)({ message: 'Two factor authentication is disabled' });
    };
    ExpressCheckoutContainer.prototype.handleTwoFASubmit = function (data) {
        this.setState(function (prevState) { return ({
            twoFA: __assign(__assign({}, prevState.twoFA), data)
        }); }, this.state.twoFA.callback);
    };
    ExpressCheckoutContainer.prototype.addMyntraInstrumentsData = function (data) {
        this.state.expressCheckoutData.myntraInstrumentsData = __assign(__assign({}, this.state.expressCheckoutData.myntraInstrumentsData), data);
    };
    ExpressCheckoutContainer.prototype.updateExpressState = function (obj, cb) {
        if (cb === void 0) { cb = function () { }; }
        this.setState(function (prevState) { return ({
            expressCheckoutData: __assign(__assign({}, prevState.expressCheckoutData), obj)
        }); }, cb);
    };
    ExpressCheckoutContainer.prototype.updateCVV = function (e) {
        this.setState({
            cvv: e.target.value,
            cvvError: null
        });
    };
    ExpressCheckoutContainer.prototype.triggerExpressCloseEvent = function () {
        var _a = this.state.expressCheckoutData, paymentType = _a.paymentType, finalAmount = _a.finalAmount;
        var _b = this.getEventRelatedData(), bankName = _b.bankName, addressType = _b.addressType, uidx = _b.uidx, hasCredit = _b.hasCredit, hasLoyalty = _b.hasLoyalty, cartId = _b.cartId;
        var customV2 = "".concat(paymentType, ",").concat(bankName, ",").concat(addressType, ",").concat(hasLoyalty ? 'loyalty' : '', ",").concat(hasCredit ? 'credit' : '');
        triggerEvent('XPRESS_HALFCARD_CLOSE', {
            custom: {
                widget: {
                    name: 'express-checkout',
                    type: 'card',
                    data_set: {
                        data: [
                            {
                                entity_type: 'cart',
                                enitity_id: cartId,
                                entity_name: finalAmount
                            }
                        ]
                    }
                },
                widget_items: {
                    name: 'close-expresscheckout',
                    type: 'button'
                },
                custom: {
                    v1: uidx,
                    v2: customV2
                }
            }
        });
    };
    ExpressCheckoutContainer.prototype.onClose = function () {
        this.props.hideExpressCheckoutHalfCard();
        this.state.twoFA.display && this.toggleTwoFA();
        this.state.captchaDetails.display && this.resetCaptcha();
        this.resetExpressCheckout();
        this.triggerExpressCloseEvent();
    };
    ExpressCheckoutContainer.prototype.getModeAttributes = function () {
        var _a = this.state.expressCheckoutData, instrumentData = _a.instrumentData, paymentType = _a.paymentType, finalAmount = _a.finalAmount, bankDiscount = _a.bankDiscount;
        var recommendedOptionsParams = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(instrumentData, 'paymentInstrumentDetails.data[0]', {});
        var modeAttributes = {};
        var showingRecommendedOptions = (0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__.isFeatureEnabled)('RECOMMENDED_OPTIONS');
        var paymentInstrumentList = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getPaymentInstrumentList)(instrumentData);
        var vpaAppName = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getSpriteObj)(instrumentData, paymentType).bankName;
        var upiSDKEnabled = this.state.installedApps.indexOf(vpaAppName) !== -1 &&
            this.state.upiIntentEnabled;
        switch (paymentType) {
            case SAVED_INSTRUMENT:
                if (finalAmount) {
                    var paymentInstrumentData = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getDefaultSavedInstrument)(instrumentData);
                    var savedInstrumentType = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(paymentInstrumentData, 'paymentInstrumentType', '');
                    var isVPA = savedInstrumentType === VPA;
                    var addressData = this.props.addressData;
                    var user = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(addressData, 'user.uidx');
                    modeAttributes = showingRecommendedOptions
                        ? {
                            useSavedCard: recommendedOptionsParams.vpa ? 'false' : 'true',
                            useSavedVpa: recommendedOptionsParams.vpa ? 'true' : 'false',
                            upiSdkEnabled: upiSDKEnabled,
                            cvvCode: this.state.cvv,
                            otherCards: 'false',
                            paymentInstrument: recommendedOptionsParams.instrumentId,
                            bankCashbackEligible: "".concat(bankDiscount !== 0),
                            bankCashbackAmount: bankDiscount,
                            user: user
                        }
                        : {
                            useSavedCard: isVPA ? 'false' : 'true',
                            useSavedVpa: isVPA ? 'true' : 'false',
                            upiSdkEnabled: upiSDKEnabled,
                            cvvCode: this.state.cvv,
                            otherCards: 'false',
                            paymentInstrument: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(paymentInstrumentData, 'instrumentId'),
                            bankCashbackEligible: "".concat(bankDiscount !== 0),
                            bankCashbackAmount: bankDiscount,
                            user: user
                        };
                }
                break;
            case WALLET_PM_NAME:
                var walletPriority = ((0,commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_11__.getGrowthHackConfigValue)('XPRESS_CHECKOUT_CONFIG') || {}).walletPriority;
                var defaultWallet = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getDefaultWallet)(paymentInstrumentList, walletPriority) || {};
                modeAttributes = showingRecommendedOptions
                    ? {
                        walletEnabled: 'true',
                        paymentProviderId: recommendedOptionsParams.id || '',
                        walletAmount: (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.roundNumber)(finalAmount || 0, 2)
                    }
                    : {
                        walletEnabled: 'true',
                        paymentProviderId: defaultWallet.id || '',
                        walletAmount: (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.roundNumber)(finalAmount || 0, 2)
                    };
                break;
            case UPI:
                var paymentInstrumentDetails = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(instrumentData, 'paymentInstrumentDetails.data', []) || [];
                var defaultUpi = paymentInstrumentDetails.find(function (entry) { return entry.name && entry.name.toLowerCase().includes(PHONEPE); }) || {};
                modeAttributes = showingRecommendedOptions
                    ? {
                        paymentProviderId: recommendedOptionsParams.id || '',
                        vpa: '',
                        saveVpa: '',
                        upiSdkEnabled: upiSDKEnabled
                    }
                    : {
                        paymentProviderId: defaultUpi.id || '',
                        vpa: '',
                        saveVpa: '',
                        upiSdkEnabled: upiSDKEnabled
                    };
                break;
            case NETBANKING:
                var defaultBank = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getDefaultBank)(paymentInstrumentList) || {};
                modeAttributes = showingRecommendedOptions
                    ? {
                        paymentProviderId: recommendedOptionsParams.id
                    }
                    : {
                        paymentProviderId: defaultBank.id
                    };
                break;
            case COD:
                var captchaDetails = this.state.captchaDetails;
                modeAttributes = {
                    captchaId: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(captchaDetails, 'id', ''),
                    codCaptcha: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(captchaDetails, 'code', '')
                };
                break;
        }
        //Free Purchase has empty mode attributes
        return modeAttributes;
    };
    ExpressCheckoutContainer.prototype.triggerSuccessPaymentEvent = function (done) {
        var twoFAData = {
            instrumentData: this.state.expressCheckoutData.instrumentData,
            myntraInstrumentsData: this.state.expressCheckoutData
                .myntraInstrumentsData,
            twoFA: this.state.twoFA,
            twoFAResponse: this.state.twoFAResponse
        };
        var showCaptcha = this.state.expressCheckoutData.paymentType === COD &&
            (0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__.isFeatureEnabled)('COD_CAPTCHA_ENABLED') &&
            !lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(twoFAData.twoFAResponse) &&
            !(0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.isTwoFAEnabled)(twoFAData);
        if (showCaptcha) {
            this.setState(function (prevState) { return ({
                captchaDetails: __assign(__assign({}, prevState.captchaDetails), { display: true, callback: done })
            }); }, this.props.setLoader(false));
            return;
        }
        done();
    };
    ExpressCheckoutContainer.prototype.getNewPaymentForm = function () {
        var paymentOptions = this.state.expressCheckoutData.paymentOptions;
        var cartData = this.props.cartData;
        var _a = this.state.expressCheckoutData, paymentType = _a.paymentType, finalAmount = _a.finalAmount, instrumentData = _a.instrumentData, myntraInstrumentsData = _a.myntraInstrumentsData;
        var _b = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getPaymentModeObj)(paymentType, instrumentData, finalAmount), paymentMode = _b.paymentMode, paymentModeName = _b.paymentModeName, paymentUrl = _b.paymentUrl;
        return (react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_payment_common_PayNowHandler__WEBPACK_IMPORTED_MODULE_10__.default, { paymentUrl: paymentUrl, paymentMode: paymentMode, paymentModeName: paymentModeName, paymentOptions: paymentOptions, modeAttributes: this.getModeAttributes(), deviceMode: 'mobile', submitCallback: this.triggerSuccessPaymentEvent, cartData: cartData, myntraInstrumentsData: myntraInstrumentsData, twoFA: this.state.twoFA, twoFAResponse: this.state.twoFAResponse, toggleTwoFA: this.toggleTwoFA, isBlockTwoFAToggle: this.isBlockTwoFAToggle, blockTwoFAToggle: this.blockTwoFAToggle, setTwoFADetails: this.setTwoFADetails, setPaymentFailureAttributes: this.redirectToPaymentError, setLoader: this.props.setLoader, instrumentData: instrumentData, actionData: {
                hideBtn: true,
                enabled: true,
                className: "".concat(_expresscheckout_base_css__WEBPACK_IMPORTED_MODULE_21__.default.hideFormBtn)
            } }));
    };
    ExpressCheckoutContainer.prototype.triggerPlaceOrder = function (btn) {
        btn && btn.click();
    };
    ExpressCheckoutContainer.prototype.showCVVError = function (inputElem) {
        inputElem.focus();
        this.setState({
            cvvError: 'Please enter valid CVV Details',
            loading: false
        });
    };
    ExpressCheckoutContainer.prototype.makePayment = function () {
        var _a = this.state.expressCheckoutData, paymentType = _a.paymentType, finalAmount = _a.finalAmount, instrumentData = _a.instrumentData;
        var cartId = this.props.cartData.id;
        var walletPriority = ((0,commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_11__.getGrowthHackConfigValue)('XPRESS_CHECKOUT_CONFIG') || {}).walletPriority;
        var _b = this.getEventRelatedData(), uidx = _b.uidx, addressType = _b.addressType, hasCredit = _b.hasCredit, hasLoyalty = _b.hasLoyalty, bankName = _b.bankName;
        var customV2 = "".concat(paymentType, ",").concat(bankName, ",").concat(addressType, ",").concat(hasLoyalty ? 'loyalty' : '', ",").concat(hasCredit ? 'credit' : '');
        var _c = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getPaymentModeObj)(paymentType, instrumentData, finalAmount, walletPriority), paymentMode = _c.paymentMode, paymentModeName = _c.paymentModeName;
        var inputElem = document.getElementById('cvvInput');
        var submitBtn = document.getElementById("action-".concat(paymentModeName));
        var eventTitle = 'XPRESS_PREPAID_ORDER';
        if (finalAmount &&
            paymentType === SAVED_INSTRUMENT &&
            paymentMode === CREDIT_CARD &&
            !this.state.cvv) {
            var defaultCard = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getDefaultSavedInstrument)(instrumentData);
            var isMaestro = (defaultCard.cardType || '').toLowerCase() === MAESTRO;
            !isMaestro && this.showCVVError(inputElem);
            return;
        }
        triggerEvent(eventTitle, {
            custom: {
                widget: {
                    name: 'express-checkout',
                    type: 'card',
                    data_set: {
                        data: [
                            {
                                entity_type: 'cart',
                                enitity_id: cartId,
                                entity_name: finalAmount
                            }
                        ]
                    }
                },
                widget_items: {
                    name: 'place-order',
                    type: 'button'
                },
                custom: {
                    v1: uidx,
                    v2: customV2
                }
            }
        });
        this.triggerPlaceOrder(submitBtn);
    };
    ExpressCheckoutContainer.prototype.updateBankDiscount = function (amount) {
        var price = this.props.cartData.price;
        var finalAmount = this.getFinalAmount(amount, price);
        this.updateExpressState({
            finalAmount: finalAmount,
            bankDiscount: amount
        });
    };
    ExpressCheckoutContainer.prototype.initExpressCheckoutData = function () {
        var _this = this;
        try {
            var _a = this.state.expressCheckoutData, _b = _a.balanceData, creditData = _b.GC, loyaltyData = _b.LP, paymentOptions = _a.paymentOptions;
            var price = this.props.cartData.price;
            var bankDiscount = this.state.expressCheckoutData.bankDiscount;
            var finalAmount_1 = this.getFinalAmount(bankDiscount, price);
            var priceDetails = this.getPriceDetails();
            var orderTotalDetails = priceDetails.find(function (detail) { return detail.field === 'orderTotal'; }) || {};
            var orderTotal = orderTotalDetails.value;
            var instrumentData = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.getDefaultPaymentInstrument)(paymentOptions);
            var isValid = (0,_util_js__WEBPACK_IMPORTED_MODULE_12__.isPaymentInstrumentValid)(instrumentData);
            if (!isValid) {
                this.onExpressError('No Valid Payment options found');
                return;
            }
            var paymentType_1 = instrumentData.type;
            this.updateCreditStatus(loyaltyData, creditData);
            var checkoutData = __assign(__assign({}, this.state.expressCheckoutData), { paymentType: paymentType_1, instrumentData: instrumentData, resolved: true, finalAmount: finalAmount_1, orderTotal: orderTotal });
            this.cartChanged = false;
            this.setState({
                expressCheckoutData: checkoutData,
                expressCheckoutResolved: true,
                loading: false
            }, function () {
                var _a = _this.getEventRelatedData(), bankName = _a.bankName, hasCredit = _a.hasCredit, hasLoyalty = _a.hasLoyalty, addressType = _a.addressType, uidx = _a.uidx;
                var customV2 = "".concat(paymentType_1, ",").concat(bankName, ",").concat(addressType, ",").concat(hasLoyalty ? 'loyalty' : '', ",").concat(hasCredit ? 'credit' : '');
                triggerEvent('XPRESS_PREPAID_LOADED', {
                    custom: {
                        widget: {
                            name: 'express-checkout',
                            type: 'card',
                            data_set: {
                                data: [
                                    {
                                        entity_type: 'cart',
                                        entity_id: finalAmount_1,
                                        entity_name: 'cart_value'
                                    }
                                ]
                            }
                        },
                        custom: {
                            v1: uidx,
                            v2: customV2,
                            v3: paymentType_1
                        }
                    }
                });
            });
        }
        catch (e) {
            this.onExpressError("Init Express Error - ".concat(e));
        }
    };
    ExpressCheckoutContainer.prototype.setOrderAddress = function (data, successCB, errorCB) {
        commonBrowserUtils_AddressManager__WEBPACK_IMPORTED_MODULE_4__.default.setOrderAddress(data, successCB, errorCB);
    };
    ExpressCheckoutContainer.prototype.getCreditsBalance = function () {
        var _this = this;
        var promises = [];
        promises.push((0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__.isFeatureEnabled)('LP_BALANCE_LAZYLOAD')
            ? Promise.resolve()
            : new Promise(function (resolve) {
                return commonBrowserUtils_CreditsManager__WEBPACK_IMPORTED_MODULE_7__.default.getLoyaltyPointsBalance(null, resolve, resolve);
            }));
        promises.push((0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__.isFeatureEnabled)('AUTOGC_BALANCE_LAZYLOAD')
            ? Promise.resolve()
            : new Promise(function (resolve) {
                return commonBrowserUtils_CreditsManager__WEBPACK_IMPORTED_MODULE_7__.default.getGiftCardBalance(null, resolve, resolve);
            }));
        Promise.all(promises)
            .then(this.setCreditsBalance)
            .catch(function (e) {
            _this.onExpressError("Credits API could not be initialised - ".concat(e));
        });
    };
    ExpressCheckoutContainer.prototype.setCreditsBalance = function (balance) {
        var lpBalance = balance[0], gcBalance = balance[1];
        var expressCheckoutData = this.state.expressCheckoutData;
        var balanceData = expressCheckoutData.balanceData;
        if (gcBalance && !gcBalance.error) {
            balanceData.GC = gcBalance;
        }
        if (lpBalance && !lpBalance.error) {
            balanceData.LP = lpBalance;
        }
        this.updateExpressState({
            balanceData: balanceData
        });
    };
    ExpressCheckoutContainer.prototype.resolveExpressCheckout = function () {
        var paymentType = this.state.expressCheckoutData.paymentType;
        if (paymentType === COD && !this.inCodRange()) {
            this.onExpressError('Express Not in COD range');
        }
        this.setState({
            expressCheckoutResolved: true
        });
    };
    ExpressCheckoutContainer.prototype.resetExpressCheckout = function () {
        var section = this.state.section;
        if (typeof section === 'string' && section !== 'default') {
            this.toggleDetails('default');
        }
        this.setState({
            cvvError: null
        });
    };
    ExpressCheckoutContainer.prototype.refreshPaymentOptions = function (cb) {
        var _this = this;
        this.getPaymentOptions()
            .then(function (paymentOptions) {
            _this.onPaymentOptionsFetch(paymentOptions);
            return paymentOptions;
        })
            .then(cb)
            .catch(function (e) {
            console.error('Could not get payment options', e);
        });
    };
    ExpressCheckoutContainer.prototype.handleExpressCheckout = function () {
        var _this = this;
        this.setState({
            expressCheckoutResolved: true,
            loading: true
        });
        var addressData = this.props.addressData;
        var addressId = addressData.id, unifiedId = addressData.unifiedId;
        this.setOrderAddress({ addressId: addressId, unifiedAddressId: unifiedId }, function () {
            (0,commonBrowserUtils_AddressHelper__WEBPACK_IMPORTED_MODULE_16__.setSelectedAddressCookie)({ addressId: addressId, unifiedId: unifiedId });
            var paymentOptionsPromise = _this.getPaymentOptions();
            paymentOptionsPromise.then(function (paymentOptions) {
                _this.onPaymentOptionsFetch(paymentOptions, _this.initExpressCheckoutData);
            }, function (e) {
                _this.onExpressError("Failed to fetch payment options in handleExpress - ".concat(e));
            });
        }, function (e) {
            _this.onExpressError("Failed to set address in handleExpress - ".concat(e));
        });
    };
    // // done callback is only passed when the PayNowForm is getting submitted
    ExpressCheckoutContainer.prototype.clearExpressHistory = function (done) {
        if (this.props.showExpressCheckoutHalfCard) {
            !(0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.isIOSApp)() && this.props.history.goBack();
        }
        done && done();
    };
    ExpressCheckoutContainer.prototype.onExpressError = function (msg) {
        console.error('Express Error', msg);
        triggerEvent('XPRESS_SERVICE_ERROR', {
            custom: {
                widget: {
                    name: 'express-checkout',
                    type: 'card'
                },
                widget_items: {
                    name: "error-".concat(msg),
                    type: 'card'
                }
            }
        });
        this.clearExpressHistory();
        setTimeout(!(0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_6__.isVariantEnabled)('AOC_V2_VARIANT3')
            ? commonBrowserUtils_AddressHelper__WEBPACK_IMPORTED_MODULE_16__.redirectToAddress
            : commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.redirectToPayment, 10);
    };
    ExpressCheckoutContainer.prototype.getTwoFADetails = function () {
        var _this = this;
        //setting twofa details from shield
        var addressData = this.props.addressData;
        var addressId = addressData.id, unifiedId = addressData.unifiedId;
        commonBrowserUtils_PaymentsManager__WEBPACK_IMPORTED_MODULE_5__.default.userTwoFAVerification({
            addressId: addressId,
            addressUnifiedId: unifiedId
        }, function (res) {
            _this.setTwoFADetails(res);
        }, function (err) { });
    };
    ExpressCheckoutContainer.prototype.getPaymentOptions = function () {
        this.getTwoFADetails();
        var cartId = this.props.cartData.id;
        return new Promise(function (resolve, reject) {
            commonBrowserUtils_PaymentsManager__WEBPACK_IMPORTED_MODULE_5__.default.getPaymentOptions({ cartId: cartId }, function (r) {
                resolve(r);
            }, reject);
        });
    };
    ExpressCheckoutContainer.prototype.updateLoyalty = function (isApply) {
        var _this = this;
        return new Promise(function (resolve) {
            var apiFn = isApply
                ? commonBrowserUtils_CreditsManager__WEBPACK_IMPORTED_MODULE_7__.default.applyLoyaltyPoints
                : commonBrowserUtils_CreditsManager__WEBPACK_IMPORTED_MODULE_7__.default.removeLoyaltyPoints;
            _this.setState({ loading: true }, function () {
                return apiFn(null, function (res) { return _this.onCreditSuccessUpdate(res, isApply, LOYALTY); }, function (res) { return _this.onCreditFailure(res, resolve); });
            });
        });
    };
    ExpressCheckoutContainer.prototype.updateCredit = function (isApply) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var apiFn = isApply
                ? commonBrowserUtils_CreditsManager__WEBPACK_IMPORTED_MODULE_7__.default.applyGiftCard
                : commonBrowserUtils_CreditsManager__WEBPACK_IMPORTED_MODULE_7__.default.removeGiftCard;
            _this.setState({
                loading: true
            }, function () {
                return apiFn(null, function (res) { return _this.onCreditSuccessUpdate(res, isApply, CREDIT); }, function (res) { return _this.onCreditFailure(res, resolve); });
            });
        });
    };
    ExpressCheckoutContainer.prototype.onCreditSuccessUpdate = function (res, isApply, creditType) {
        var _this = this;
        var _a = this.state.expressCheckoutData, lpObj = _a.lpObj, gcObj = _a.gcObj, bankDiscount = _a.bankDiscount;
        this.props.updatePageData(res, { updateKey: 'cartData' });
        var appliedGC = (0,commonBrowserUtils_CartHelper__WEBPACK_IMPORTED_MODULE_15__.getAppliedInstrument)('giftcard', res);
        var appliedLP = (0,commonBrowserUtils_CartHelper__WEBPACK_IMPORTED_MODULE_15__.getAppliedInstrument)('loyaltypoints', res);
        var gcAmount = appliedGC ? appliedGC.value : 0;
        var lpAmount = appliedLP ? appliedLP.value : 0;
        var updatedGCObj = __assign(__assign(__assign({}, gcObj), { gcAmount: gcAmount }), (creditType === CREDIT && { creditChecked: isApply }));
        var updatedLPObj = __assign(__assign(__assign({}, lpObj), { lpAmount: lpAmount }), (creditType === LOYALTY && { loyaltyChecked: isApply }));
        creditType === CREDIT
            ? this.triggerCreditClickEvent(isApply, lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(updatedGCObj, 'gcBalance'), lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(updatedGCObj, 'gcAmount'), creditType)
            : this.triggerCreditClickEvent(isApply, lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(updatedLPObj, 'lpBalance'), lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(updatedLPObj, 'lpAmount'), creditType);
        this.updateExpressState({
            lpObj: updatedLPObj,
            gcObj: updatedGCObj,
            finalAmount: this.getFinalAmount(bankDiscount, res.price)
        });
        this.refreshPaymentOptions(function (updatedPaymentOptions) {
            var mcTwoFAData = {
                enable: !!appliedGC
            };
            var lpTwoFAData = {
                enable: !!appliedLP
            };
            _this.addMyntraInstrumentsData(__assign(__assign({}, (creditType === CREDIT && {
                auto_giftcard_used: isApply ? 'true' : '',
                auto_giftcard_amount: isApply ? gcAmount : '0',
                giftcard_type: isApply ? 'myntracredit' : '',
                twofa_mc_data: mcTwoFAData,
                twofa_lp_data: lpTwoFAData,
                paynowInstrumentsData: __assign(__assign({}, lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(_this, 'state.expressCheckoutData.myntraInstrumentsData.paynowInstrumentsData')), { autoGiftCardAmount: isApply ? gcAmount : '0', autoGiftCardUsed: isApply ? 'true' : '', myntraCreditEligible: isApply ? 'true' : '', myntraCreditAmount: isApply ? gcAmount : '0', giftcardType: isApply ? 'myntracredit' : '' })
            })), (creditType === LOYALTY && {
                useloyaltypoints: isApply ? 'Y' : 'N',
                twofa_mc_data: mcTwoFAData,
                twofa_lp_data: lpTwoFAData,
                paynowInstrumentsData: __assign(__assign({}, lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(_this, 'state.expressCheckoutData.myntraInstrumentsData.paynowInstrumentsData')), { useloyaltypoints: isApply ? 'Y' : 'N' })
            })));
            _this.setState({
                loading: false
            });
        });
    };
    ExpressCheckoutContainer.prototype.triggerCreditClickEvent = function (isApply, balance, amount, type) {
        triggerEvent("XPRESS_".concat(type === CREDIT ? 'CREDIT' : 'POINTS', "_CLICK"), {
            custom: {
                widget: {
                    name: 'express-checkout',
                    type: 'card'
                },
                widget_items: {
                    name: "myntra_".concat(type === CREDIT ? 'credit' : 'points', "-expresscheckout"),
                    type: 'button'
                },
                custom: {
                    v1: isApply !== undefined
                        ? isApply
                            ? 'select'
                            : 'deselect'
                        : undefined,
                    v2: balance,
                    v3: amount
                },
                event_type: 'widgetItemClick'
            }
        });
    };
    ExpressCheckoutContainer.prototype.onCreditFailure = function (err, callback) {
        callback && callback(err);
    };
    ExpressCheckoutContainer.prototype.onPaymentOptionsFetch = function (data, cb) {
        if (cb === void 0) { cb = function () { }; }
        this.updateExpressState({
            paymentOptions: data
        }, cb);
    };
    ExpressCheckoutContainer.prototype.redirectToPaymentError = function (errorCode, cartContext) {
        var params = {
            errorCode: errorCode
        };
        var url = (0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_17__.createUrlWithQueryParams)('/checkout/payment', params);
        SHELL.redirectTo(url);
    };
    ExpressCheckoutContainer.prototype.inCodRange = function () {
        var _a = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.props, 'cartData.userDetails', {}), returnAbuser = _a.returnAbuser, cod = _a.cod;
        var minCOD = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(cod, 'minCod', '0');
        var maxCOD = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(cod, 'maxCod');
        var _isReturnAbuser = (0,commonBrowserUtils_Helper__WEBPACK_IMPORTED_MODULE_14__.isReturnAbuser)(returnAbuser);
        var subTotal = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.props, 'cartData.price', {}).subTotal;
        var skipExpressCheckout = _isReturnAbuser || subTotal <= minCOD || subTotal >= maxCOD;
        return !skipExpressCheckout;
    };
    ExpressCheckoutContainer.prototype.initExpressCheckout = function () {
        if (this.inCodRange()) {
            this.getCreditsBalance();
        }
        else {
            console.warn('Skipping Express');
        }
    };
    ExpressCheckoutContainer.prototype.render = function () {
        var _a = this, _b = _a.props, updatePageData = _b.updatePageData, showExpressCheckoutHalfCard = _b.showExpressCheckoutHalfCard, addressData = _b.addressData, serviceabilityData = _b.serviceabilityData, serviceabilityFlags = _b.serviceabilityFlags, setLoader = _b.setLoader, state = _a.state;
        var expressProps = __assign(__assign(__assign({}, state), lodash_pick__WEBPACK_IMPORTED_MODULE_2___default()(this, xpressMethods)), { data: this.props.cartData, updatePageData: updatePageData, addressData: addressData, serviceabilityData: serviceabilityData, serviceabilityFlags: serviceabilityFlags, setLoader: setLoader });
        return showExpressCheckoutHalfCard && react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(_ExpressCheckout__WEBPACK_IMPORTED_MODULE_20__.default, __assign({}, expressProps));
    };
    return ExpressCheckoutContainer;
}(react__WEBPACK_IMPORTED_MODULE_0__.default.Component));
ExpressCheckoutContainer.propTypes = {
    hideExpressCheckoutHalfCard: (prop_types__WEBPACK_IMPORTED_MODULE_22___default().func),
    updatePageData: (prop_types__WEBPACK_IMPORTED_MODULE_22___default().func),
    showExpressCheckoutHalfCard: (prop_types__WEBPACK_IMPORTED_MODULE_22___default().bool),
    cartData: (prop_types__WEBPACK_IMPORTED_MODULE_22___default().object),
    setLoader: (prop_types__WEBPACK_IMPORTED_MODULE_22___default().func),
    history: (prop_types__WEBPACK_IMPORTED_MODULE_22___default().object)
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExpressCheckoutContainer);


/***/ }),

/***/ "./browser/components/cart/mobile/ExpressCheckoutContainer/util.js":
/*!*************************************************************************!*\
  !*** ./browser/components/cart/mobile/ExpressCheckoutContainer/util.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "formatDate": () => (/* binding */ formatDate),
/* harmony export */   "formatDateFromEpoch": () => (/* binding */ formatDateFromEpoch),
/* harmony export */   "isValidCard": () => (/* binding */ isValidCard),
/* harmony export */   "getPaymentInstrumentList": () => (/* binding */ getPaymentInstrumentList),
/* harmony export */   "isPaymentInstrumentValid": () => (/* binding */ isPaymentInstrumentValid),
/* harmony export */   "getDefaultPaymentInstrument": () => (/* binding */ getDefaultPaymentInstrument),
/* harmony export */   "getPaymentInstrumentByType": () => (/* binding */ getPaymentInstrumentByType),
/* harmony export */   "getDefaultSavedInstrument": () => (/* binding */ getDefaultSavedInstrument),
/* harmony export */   "getPaymentModeObj": () => (/* binding */ getPaymentModeObj),
/* harmony export */   "getDefaultWallet": () => (/* binding */ getDefaultWallet),
/* harmony export */   "getDefaultBank": () => (/* binding */ getDefaultBank),
/* harmony export */   "getCreditTitle": () => (/* binding */ getCreditTitle),
/* harmony export */   "getProductDeliveryDate": () => (/* binding */ getProductDeliveryDate),
/* harmony export */   "getMinDeliveryDate": () => (/* binding */ getMinDeliveryDate),
/* harmony export */   "getMaxDeliveryDate": () => (/* binding */ getMaxDeliveryDate),
/* harmony export */   "getSpriteObj": () => (/* binding */ getSpriteObj)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/get */ "../node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! commonUtils/KVPairManager */ "./utils/KVPairManager/index.js");
/* harmony import */ var commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! commonUtils/GrowthHackConfigManager */ "./utils/GrowthHackConfigManager/index.js");
/* harmony import */ var commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! commonUtils/FeaturesManager */ "./utils/FeaturesManager/index.js");
/* harmony import */ var commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! commonBrowserUtils/PaymentHelper */ "./browser/utils/PaymentHelper/index.js");
/* harmony import */ var commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! commonBrowserUtils/PaymentConstants */ "./browser/utils/PaymentConstants.js");
/* harmony import */ var _expressConstants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./expressConstants */ "./browser/components/cart/mobile/ExpressCheckoutContainer/expressConstants.js");







var VALID_PAYMENTS = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.VALID_PAYMENTS, PHONEPE = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.PHONEPE, PAYMENT_NAME_MAP = _expressConstants__WEBPACK_IMPORTED_MODULE_6__.default.PAYMENT_NAME_MAP;
var CREDIT_CARD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.CREDIT_CARD, DEBIT_CARD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.DEBIT_CARD, COD = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.COD, NETBANKING = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.NETBANKING, UPI = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.UPI, VPA = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.VPA, SAVED_INSTRUMENT = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.SAVED_INSTRUMENT, WALLET_PM_NAME = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.WALLET_PM_NAME, INSTRUMENT_ELIGIBLE_CODE = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.INSTRUMENT_ELIGIBLE_CODE, SAVEDCARD_LIMIT_REACHED_CODE = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.SAVEDCARD_LIMIT_REACHED_CODE, SAVING_CARD_NOT_ALLOWED_CODE = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.SAVING_CARD_NOT_ALLOWED_CODE, BANK_MAP = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.BANK_MAP, CARD_TYPE = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.CARD_TYPE;
var formatDate = function (d) {
    var today = new Date();
    today.setDate(today.getDate() + d);
    var _a = today.toString().split(' '), date = _a[0], month = _a[1], day = _a[2], year = _a[3];
    return "".concat(day, " ").concat(month, ", ").concat(year, " (").concat(date, ")");
};
var transformString = function (str) { return (str || '').toLowerCase().replace(/\s/g, ''); };
var getDefaultBank = function (bankList) {
    if (bankList === void 0) { bankList = []; }
    return bankList.find(function (bank) { return bank.defaultBank; }) || bankList[0] || {};
};
var isPaymentInstrumentValid = function (instrumentData) {
    if (instrumentData === void 0) { instrumentData = {}; }
    var type = instrumentData.type, code = instrumentData.code, _a = instrumentData.paymentInstrumentDetails, _b = _a === void 0 ? {} : _a, _c = _b.data, data = _c === void 0 ? [] : _c;
    return (VALID_PAYMENTS.indexOf(type) !== -1 &&
        (code === INSTRUMENT_ELIGIBLE_CODE ||
            code === SAVEDCARD_LIMIT_REACHED_CODE ||
            code === SAVING_CARD_NOT_ALLOWED_CODE) &&
        !!data &&
        data.length);
};
var getPaymentModeFromWallet = function (wallet) {
    if (wallet === void 0) { wallet = {}; }
    return wallet.directIntegration
        ? commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.WALLET_PM_DIRECT
        : commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.WALLET_PM;
};
var getPaymentInstrumentList = function (paymentObj) {
    if (paymentObj === void 0) { paymentObj = {}; }
    var _a = paymentObj.paymentInstrumentDetails, _b = _a === void 0 ? {} : _a, data = _b.data;
    data = data || [];
    return data;
};
var PRIORITY_WALLET_ID_LIST = [
    {
        id: 3,
        name: 'PayPal'
    },
    {
        id: 43,
        name: 'Airtel Money'
    },
    {
        id: 69,
        name: 'PayZapp'
    },
    {
        id: 46,
        name: 'Mobikwik'
    },
    {
        id: 2,
        name: 'Paytm'
    },
    {
        id: 67,
        name: 'FreeCharge'
    }
];
var nameNotTest = function (name) { return name && !transformString(name).includes('test'); };
var getDefaultWallet = function (walletList, priority) {
    if (walletList === void 0) { walletList = []; }
    if (priority === void 0) { priority = PRIORITY_WALLET_ID_LIST; }
    if (!walletList.length)
        return {};
    var directWallet = walletList.filter(function (wallet) { return wallet.directIntegration; });
    var filteredWallet = !directWallet.length ? walletList : directWallet;
    if (filteredWallet.length === 1 && nameNotTest(filteredWallet[0].name)) {
        return filteredWallet[0];
    }
    var supportedWallets = (0,commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_1__.getKVPairValue)('WALLET_CONFIG').supportedWallets;
    var highPriorityWallet = filteredWallet[0];
    var _loop_1 = function (i) {
        var item = priority[i];
        // Returns the first wallet found based on priority
        highPriorityWallet = filteredWallet.find(function (wallet) {
            var walletCode = transformString(wallet && wallet.bankCode);
            var priorityWalletCode = transformString(item && item.bankCode);
            return (supportedWallets.indexOf(walletCode) > -1 &&
                (walletCode === priorityWalletCode ||
                    walletCode.includes(priorityWalletCode)));
        });
        if (highPriorityWallet) {
            return "break";
        }
    };
    for (var i = 0; i < priority.length; i++) {
        var state_1 = _loop_1(i);
        if (state_1 === "break")
            break;
    }
    return highPriorityWallet;
};
var getPaymentModeObj = function (paymentType, instrumentData, finalAmount, priorityList) {
    if (instrumentData === void 0) { instrumentData = {}; }
    var _a = instrumentData.paymentInstrumentDetails, _b = _a === void 0 ? {} : _a, data = _b.data, paymentUrl = _b.paymentUrl;
    var walletObj;
    var paymentMode = paymentType, paymentModeName = paymentType;
    switch (paymentType) {
        case UPI:
            paymentMode = UPI;
            paymentModeName = UPI;
            break;
        case NETBANKING:
            paymentMode = NETBANKING;
            paymentModeName = NETBANKING;
            break;
        case WALLET_PM_NAME:
            paymentModeName = WALLET_PM_NAME;
            walletObj = getDefaultWallet(data, priorityList);
            paymentMode = getPaymentModeFromWallet(walletObj);
            break;
        case SAVED_INSTRUMENT:
            var paymentInstrumentData = getDefaultSavedInstrument(instrumentData);
            var savedInstrumentType = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(paymentInstrumentData, 'paymentInstrumentType', '');
            var isVpa = savedInstrumentType === VPA;
            paymentMode = isVpa ? UPI : CREDIT_CARD;
            paymentModeName = SAVED_INSTRUMENT;
            break;
        case COD:
            paymentMode = COD;
            paymentModeName = COD;
            break;
    }
    if (finalAmount === 0) {
        paymentMode = paymentModeName = commonBrowserUtils_PaymentConstants__WEBPACK_IMPORTED_MODULE_5__.default.FREE_PURCHASE;
    }
    return { paymentMode: paymentMode, paymentModeName: paymentModeName, paymentUrl: paymentUrl };
};
var isValidCard = function (card) { return !(card.expired || card.inValid); };
var getDefaultSavedInstrument = function (savedInstrumentData) {
    var data = getPaymentInstrumentList(savedInstrumentData);
    return data.find(function (savedInstrument) {
        if (savedInstrument.paymentInstrumentType === VPA) {
            return savedInstrument;
        }
        else if (savedInstrument.paymentInstrumentType === CARD_TYPE) {
            return isValidCard(savedInstrument);
        }
        return false;
    });
};
var getDefaultPaymentInstrument = function (paymentsData) {
    if (paymentsData === void 0) { paymentsData = {}; }
    if ((0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__.isFeatureEnabled)('RECOMMENDED_OPTIONS')) {
        return paymentsData.recommendedPaymentInstrumentDetails[0];
    }
    var _a = paymentsData.lastPaymentOption, lastPaymentOption = _a === void 0 ? COD : _a;
    var paymentType = lastPaymentOption === CREDIT_CARD || lastPaymentOption === DEBIT_CARD
        ? SAVED_INSTRUMENT
        : lastPaymentOption;
    var savedInstrumentData = getPaymentInstrumentByType(paymentsData, SAVED_INSTRUMENT);
    var hasValidSavedInstrument = getDefaultSavedInstrument(savedInstrumentData);
    if (paymentType === UPI) {
        var upiData = getPaymentInstrumentByType(paymentsData, UPI);
        var upiList = getPaymentInstrumentList(upiData);
        var defaultUPI = getDefaultBank(upiList);
        var upiName = ((defaultUPI && defaultUPI.name) || '').toLowerCase();
        upiName = upiName.replace(/\s/g, '');
        var isPhonePe = upiName.includes(PHONEPE);
        if (!isPhonePe) {
            paymentType = SAVED_INSTRUMENT;
        }
    }
    if (paymentType === SAVED_INSTRUMENT &&
        !hasValidSavedInstrument //Resort to COD if no match found
    ) {
        paymentType = COD;
    }
    return (0,commonBrowserUtils_PaymentHelper__WEBPACK_IMPORTED_MODULE_4__.getInstrumentData)(paymentsData, paymentType);
};
var getPaymentInstrumentByType = function (paymentOptions, type) {
    if (paymentOptions === void 0) { paymentOptions = {}; }
    var _a = paymentOptions.paymentInstrumentDetails, paymentInstrumentDetails = _a === void 0 ? [] : _a;
    return paymentInstrumentDetails.find(function (instrument) { return instrument.type === type; });
};
var getCreditTitle = function (hasLoyalty, hasGC) {
    var creditTitle = '';
    if (hasLoyalty && hasGC) {
        creditTitle = 'Myntra Credit & MynCash';
    }
    else if (hasLoyalty && !hasGC) {
        creditTitle = 'MynCash';
    }
    else if (hasGC && !hasLoyalty) {
        creditTitle = 'Myntra Credits';
    }
    return creditTitle;
};
var formatDateFromEpoch = function (epoch) {
    if (epoch == null)
        return;
    var d = new Date(Number(epoch));
    var _a = d.toString().split(' '), date = _a[0], month = _a[1], day = _a[2], year = _a[3];
    return "".concat(day, " ").concat(month, ", ").concat(year, " (").concat(date, ")");
};
var getDeliveryByType = function (shippingEstimates, type) {
    if (shippingEstimates == null)
        return;
    var delivery = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(shippingEstimates.find(function (_a) {
        var _b = _a.shippingMethod, shippingMethod = _b === void 0 ? '' : _b;
        return shippingMethod === type;
    }), 'promiseDate');
    if (delivery !== undefined)
        return Number(delivery);
};
var getProductDeliveryDate = function (shippingEstimates) {
    if (shippingEstimates == null)
        return;
    if ((0,commonUtils_FeaturesManager__WEBPACK_IMPORTED_MODULE_3__.isFeatureEnabled)('SPEED_11')) {
        var expressDelivery = getDeliveryByType(shippingEstimates, 'EXPRESS');
        if (expressDelivery !== undefined)
            return expressDelivery;
    }
    var normalDelivery = getDeliveryByType(shippingEstimates, 'NORMAL');
    return normalDelivery;
};
var getDeliveryDates = function (serviceabilityData) {
    if (serviceabilityData == null)
        return;
    return serviceabilityData.map(function (_a) {
        var shippingEstimates = _a.shippingEstimates;
        return getProductDeliveryDate(shippingEstimates);
    });
};
var getMinDeliveryDate = function (serviceabilityData) {
    if (serviceabilityData == null)
        return;
    var minDelivery = getDeliveryDates(serviceabilityData).reduce(function (v1, v2) { return (v1 < v2 ? v1 : v2); }, Number.POSITIVE_INFINITY);
    if (minDelivery != Number.POSITIVE_INFINITY)
        return formatDateFromEpoch(minDelivery);
};
var getMaxDeliveryDate = function (serviceabilityData) {
    if (serviceabilityData == null)
        return;
    var maxDelivery = getDeliveryDates(serviceabilityData).reduce(function (v1, v2) { return (v1 > v2 ? v1 : v2); }, Number.NEGATIVE_INFINITY);
    if (maxDelivery != Number.NEGATIVE_INFINITY)
        return formatDateFromEpoch(maxDelivery);
};
var getDefaultUPI = function (data) {
    if (data === void 0) { data = []; }
    return data.find(function (entry) { return entry.name && entry.name.toLowerCase().includes(PHONEPE); }) || {};
};
var getSpriteObj = function (instrumentData, paymentType) {
    var spriteName, bankName = '', paymentName, defaultBank, payerName, vpa, walletName;
    var walletPriority = (0,commonUtils_GrowthHackConfigManager__WEBPACK_IMPORTED_MODULE_2__.getGrowthHackConfigValue)('XPRESS_CHECKOUT_CONFIG').walletPriority;
    var iconDisplayUPI = (0,commonUtils_KVPairManager__WEBPACK_IMPORTED_MODULE_1__.getKVPairValue)('UPI_CONFIG').iconDisplayUPI;
    var _a = instrumentData.paymentInstrumentDetails, _b = _a === void 0 ? {} : _a, data = _b.data, type = instrumentData.type;
    data = data || [];
    paymentName = PAYMENT_NAME_MAP[paymentType];
    var paymentInstrumentData = getDefaultSavedInstrument(instrumentData);
    var savedInstrumentType = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(paymentInstrumentData, 'paymentInstrumentType', '');
    if (type === NETBANKING) {
        defaultBank = getDefaultBank(data) || {};
        bankName = defaultBank.name || '';
        spriteName = "wallet-".concat(BANK_MAP[bankName.toLowerCase()] || 'bank');
    }
    if (type === UPI) {
        // Currently being used only for PhonePE
        defaultBank = getDefaultUPI(data) || {};
        bankName = defaultBank.name || '';
        var name_1 = bankName.toLowerCase();
        name_1 = name_1.replace(/\s/g, '');
        var displayIcon = iconDisplayUPI.indexOf(name_1) !== -1 ? name_1 : 'otherupi';
        spriteName = "upi-".concat(displayIcon);
    }
    if (type === SAVED_INSTRUMENT && savedInstrumentType === VPA) {
        bankName = (paymentInstrumentData.appName || '').toLowerCase();
        payerName = paymentInstrumentData.payerAccountName;
        vpa = paymentInstrumentData.vpa;
        bankName = bankName.replace(/\s/g, '');
        var displayIcon = iconDisplayUPI.indexOf(bankName) !== -1 ? bankName : 'otherupi';
        spriteName = "upi-".concat(displayIcon);
    }
    if (type === WALLET_PM_NAME) {
        defaultBank = getDefaultWallet(data, walletPriority) || {};
        bankName = defaultBank.name || 'bank';
        walletName = bankName.toLowerCase().replace(/\s/g, '');
        spriteName =
            walletName === 'paypal'
                ? "wallet-tab-".concat(walletName)
                : "wallet-".concat(walletName);
    }
    return {
        bankName: bankName,
        spriteName: spriteName,
        paymentName: paymentName,
        payerName: payerName,
        vpa: vpa
    };
};



/***/ })

}]);
//# sourceMappingURL=expressCheckoutMobile.js.map