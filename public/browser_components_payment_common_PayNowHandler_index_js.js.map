{"version":3,"sources":["webpack:///./browser/components/payment/common/PayNowAjax/PayNowTemplate/index.js","webpack:///./browser/components/payment/common/PayNowAjax/index.js","webpack:///./browser/components/payment/common/PayNowHandler/index.js","webpack:///./browser/components/payment/common/PayNowLoader/index.js","webpack:///./browser/components/payment/common/SaveCardConsent/index.js"],"names":[],"mappings":"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","file":"browser_components_payment_common_PayNowHandler_index_js.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PaymentConstants from 'commonBrowserUtils/PaymentConstants';\nimport { getCartContext } from 'commonBrowserUtils/CartHelper';\nimport { createUrlWithQueryParams } from 'commonBrowserUtils/PaymentHelper';\nimport {\n  triggerMaWithLargePayload,\n  isAndroidApp\n} from 'commonBrowserUtils/Helper';\n\nconst { PAYNOW_TEMPLATE_CODE, PAYNOW_ERROR_CODE } = PaymentConstants;\n\nconst onPaynowError = ({\n  closeLoader,\n  setPaymentFailureAttributes,\n  templateCode,\n  errorCode = PAYNOW_ERROR_CODE.DEFAULT_PAYMENT_FAILURE_ERROR_CODE,\n  cartContext,\n  postURL,\n  payload\n}) => {\n  setPaymentFailureAttributes(errorCode, cartContext || getCartContext());\n\n  triggerEvent('PAY_NOW_ERROR', {\n    gaLabel: `V3|${postURL}|${templateCode}|${errorCode}`,\n    maData: {\n      version: 'V3',\n      postURL,\n      templateCode,\n      errorCode\n    }\n  });\n  triggerMaWithLargePayload('PAY_NOW_ERROR_PAYLOAD', {\n    ...payload,\n    templateCode,\n    errorCode\n  });\n  closeLoader && closeLoader();\n};\n\nclass PhonePeSdkTemplate extends React.Component {\n  constructor(props) {\n    super(props);\n    [\n      'setFormRef',\n      'onSdkLoadSuccess',\n      'onPaymentError',\n      'onPaymentSuccess'\n    ].forEach(method => (this[method] = this[method].bind(this)));\n  }\n\n  setFormRef(node) {\n    this.form = node;\n  }\n\n  onPaymentError(message, errorCode) {\n    const {\n      setPaymentFailureAttributes,\n      closeLoader,\n      templateCode,\n      postURL,\n      payload\n    } = this.props;\n    onPaynowError({\n      setPaymentFailureAttributes,\n      closeLoader,\n      message,\n      templateCode,\n      errorCode,\n      postURL,\n      payload\n    });\n  }\n\n  onPaymentSuccess() {\n    const {\n      paynowResponse: { postURL, templateCode }\n    } = this.props;\n    triggerEvent('PAY_NOW_SUCCESS', { version: 'V3', postURL, templateCode });\n    this.form.submit();\n  }\n\n  onSdkLoadSuccess() {\n    const self = this;\n    PhonePe.PhonePe.build(\n      PhonePe.Constants.Species.web,\n      PhonePe.Constants.OS.android\n    )\n      .then(function(sdk) {\n        const {\n          paynowResponse: { postURL: fallbackURL, params } = {}\n        } = self.props;\n        const {\n          merchantName,\n          imageURL,\n          quantity,\n          reservationId,\n          merchantId,\n          validFor,\n          merchantTransactionId,\n          serviceCategory,\n          payableAmount\n        } = params;\n\n        const context = {\n          quantity,\n          reservationId,\n          merchantId,\n          validFor,\n          merchantTransactionId,\n          serviceCategory,\n          payableAmount\n        };\n        sdk\n          .openPaymentsPage(merchantName, context, fallbackURL, imageURL, [])\n          .then(function(response) {\n            self.onPaymentSuccess();\n          })\n          .catch(function(err) {\n            // TODO: Should be cross verified with payments team\n            self.onPaymentSuccess();\n          });\n      })\n      .catch(function(err) {\n        self.onPaymentError(err, PAYNOW_ERROR_CODE.SDK_LOAD_ERROR);\n      });\n  }\n\n  componentDidMount() {\n    if (loadJS) {\n      loadJS(\n        'https://constant.myntassets.com/pwa/assets/js/phonepesdk-11082020.js',\n        this.onSdkLoadSuccess\n      );\n    } else {\n      this.onPaymentError('loadJS function is not defined in the shell');\n    }\n  }\n\n  render() {\n    const { postURL } = this.props.paynowResponse;\n    return (\n      <form\n        name={'PhonepeSdkTemplateForm'}\n        autoComplete=\"off\"\n        id={`paynow-phonepeSdkTemplate`}\n        method=\"POST\"\n        action={postURL}\n        ref={this.setFormRef}\n      ></form>\n    );\n  }\n}\n\nclass ErrorTemplate extends React.Component {\n  componentDidMount() {\n    const {\n      paynowResponse: {\n        params: { paymentErrorCode, cartContext },\n        templateCode,\n        postURL\n      } = {},\n      setPaymentFailureAttributes,\n      closeLoader,\n      payload\n    } = this.props;\n\n    onPaynowError({\n      setPaymentFailureAttributes,\n      closeLoader,\n      message: '',\n      templateCode,\n      errorCode: paymentErrorCode,\n      cartContext,\n      postURL,\n      payload\n    });\n  }\n\n  render() {\n    return null;\n  }\n}\n\nclass RedirectTemplate extends React.Component {\n  componentDidMount() {\n    const {\n      paynowResponse: { postURL, templateCode } = {},\n      resetPaynowResponse\n    } = this.props;\n    triggerEvent('PAY_NOW_SUCCESS', { version: 'V3', postURL, templateCode });\n    SHELL.redirectTo(postURL);\n    resetPaynowResponse && resetPaynowResponse();\n  }\n\n  render() {\n    return null;\n  }\n}\n\nclass HTMLPostTemplate extends React.Component {\n  constructor(props) {\n    super(props);\n    ['setFormRef'].forEach(method => (this[method] = this[method].bind(this)));\n  }\n\n  componentDidMount() {\n    const {\n      paynowResponse: { postURL, templateCode },\n      resetPaynowResponse\n    } = this.props;\n    triggerEvent('PAY_NOW_SUCCESS', { version: 'V3', postURL, templateCode });\n    this.form.submit();\n    resetPaynowResponse && resetPaynowResponse();\n  }\n\n  setFormRef(node) {\n    this.form = node;\n  }\n\n  getFormData(params) {\n    const formData = [];\n    for (const key in params) {\n      formData.push(<input type=\"hidden\" name={key} value={params[key]} />);\n    }\n    return formData;\n  }\n\n  render() {\n    const {\n      paynowResponse: { postURL, params } = {},\n      upiSdkEnabled\n    } = this.props;\n    /*\n     *  TODO: Make a new template for UPI Intent or make use of RedirectTemplate.\n     *  This is a patch for android app as they don't intercept Post calls and\n     *  making a fix from android would force pps to maintain paynowForm as well\n     *  as paynow json.\n     */\n    let method = 'POST';\n    let formParams = params;\n    if (upiSdkEnabled && isAndroidApp()) {\n      method = 'GET';\n      const { vpa, ...rest } = params;\n      formParams = rest;\n    }\n\n    const formData = this.getFormData(formParams);\n\n    return (\n      <form\n        name={'HtmlPostTemplateForm'}\n        autoComplete=\"off\"\n        id={`paynow-htmlPostTemplate`}\n        action={postURL}\n        method={method}\n        ref={this.setFormRef}\n      >\n        {formData}\n      </form>\n    );\n  }\n}\n\nclass PhonePeAndroidSdkTemplate extends React.Component {\n  componentDidMount() {\n    const {\n      paynowResponse: { postURL, params, templateCode } = {},\n      resetPaynowResponse\n    } = this.props;\n    triggerEvent('PAY_NOW_SUCCESS', { version: 'V3', postURL, templateCode });\n    const redirectUrl = createUrlWithQueryParams(postURL, params);\n    SHELL.redirectTo(redirectUrl);\n    resetPaynowResponse && resetPaynowResponse();\n  }\n\n  render() {\n    return null;\n  }\n}\n\nclass OrderSucessTemplate extends React.Component {\n  componentDidMount() {\n    const {\n      paynowResponse: { postURL, params, templateCode } = {},\n      resetPaynowResponse\n    } = this.props;\n    triggerEvent('PAY_NOW_SUCCESS', { version: 'V3', postURL, templateCode });\n    const redirectUrl = createUrlWithQueryParams(postURL, params);\n    SHELL.redirectTo(redirectUrl);\n    resetPaynowResponse && resetPaynowResponse();\n  }\n\n  render() {\n    return null;\n  }\n}\n\nconst resTemplateCode = {\n  [PAYNOW_TEMPLATE_CODE.HTML_TEMPLATE]: HTMLPostTemplate,\n  [PAYNOW_TEMPLATE_CODE.REDIRECT_TEMPLATE]: RedirectTemplate,\n  [PAYNOW_TEMPLATE_CODE.PHONEPE_JS_TEMPLATE]: PhonePeSdkTemplate,\n  [PAYNOW_TEMPLATE_CODE.PHONEPE_ANDROID_TEMPLATE]: PhonePeAndroidSdkTemplate,\n  [PAYNOW_TEMPLATE_CODE.ORDER_SUCCESS_TEMPLATE]: OrderSucessTemplate,\n  [PAYNOW_TEMPLATE_CODE.ERROR_TEMPLATE]: ErrorTemplate\n};\n\nconst PayNowTemplate = props => {\n  const { paynowResponse: { templateCode } = {} } = props;\n  const Component = resTemplateCode[templateCode];\n  return <Component {...props} />;\n};\n\nexport default PayNowTemplate;\n\nPayNowTemplate.propTypes = {\n  paynowResponse: PropTypes.object,\n  setPaymentFailureAttributes: PropTypes.func,\n  closeLoader: PropTypes.func,\n  resetPaynowResponse: PropTypes.func\n};\n\nPayNowTemplate.defaultProps = {\n  paynowResponse: {},\n  setPaymentFailureAttributes: () => {},\n  closeLoader: () => {},\n  resetPaynowResponse: () => {}\n};\n","import React from 'react';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport PropTypes from 'prop-types';\n\nimport Styles from './payNowAjax.base.css';\n\nimport {\n  getXMetaApp,\n  getChannel,\n  isLocalStorageEnabled,\n  setCookie,\n  getCookie\n} from 'commonBrowserUtils/Helper';\n\nimport PaymentConstants from 'commonBrowserUtils/PaymentConstants';\nimport {\n  getPaymentTriedCount,\n  showTokenizationConsent\n} from 'commonBrowserUtils/PaymentHelper';\nimport { isFeatureEnabled } from 'commonUtils/FeaturesManager';\nimport { getKVPairValue } from 'commonUtils/KVPairManager';\nimport PaymentsManager from 'commonBrowserUtils/PaymentsManager';\nimport PayNowTemplate from './PayNowTemplate';\nimport PayNowLoader from '../PayNowLoader';\nimport { getCartContext } from 'commonBrowserUtils/CartHelper';\nimport { localStorageKeys, cookieKeys } from 'commonUtils/constants';\nimport SaveCardConsent from '../SaveCardConsent';\n\nconst { PAYNOW_ERROR_CODE } = PaymentConstants;\nlet OTP_DETAIL = {};\nlet OTP_PAYNOW_RESPONSE = null;\nconst boundFuncs = [\n  'onSubmit',\n  'checkForTwoFA',\n  'submitWithTwoFA',\n  'getPayNowBaseData',\n  'getTwoFADataByPriority',\n  'successCallBack',\n  'errorCallBack',\n  'closeLoader',\n  'executeCallbacks',\n  'submitRequest',\n  'handleMyntraInstruments',\n  'getPayload',\n  'cachePaymentAttributes',\n  'checkForMyntraCredit',\n  'checkTwoFAInstrument',\n  'toggleShowConsentFn',\n  'addTokenizationConsent',\n  'resetPaynowResponse',\n  'setDataLayerCookie'\n];\n\n//During AB code clean up rename PayNowAjax to PayNowHandler\nclass PayNowAjax extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      paynowResponse: null,\n      loader: false\n    };\n    this.saveCardConsentClickFn = () => {};\n    this.savedCardConsentInfo = getKVPairValue('SAVED_CARD_CONSENT');\n    this.isCardAutoTokenizationEnabled = isFeatureEnabled(\n      'PAYMENT_SAVE_CARD_AUTO_CONSENT'\n    );\n    boundFuncs.forEach(method => (this[method] = this[method].bind(this)));\n    this.upiSdkEnabled = false;\n  }\n\n  componentDidMount() {\n    this.requestData = this.getPayNowBaseData();\n  }\n\n  componentDidUpdate(prevProps) {\n    //adding this check coz whenever saved card consent half card is loading we are initializing the request data and loosing TwoFA and myntra instrument details\n    const { showSaveCardConsent } = prevProps;\n    if (!showSaveCardConsent && this.props.showSaveCardConsent) {\n      return;\n    }\n    this.requestData = this.getPayNowBaseData();\n  }\n\n  executeCallbacks(callbacks) {\n    if (callbacks.length > 0) {\n      const callback = callbacks.shift();\n      callback(this.executeCallbacks.bind(this, callbacks));\n    }\n  }\n\n  getPayNowBaseData() {\n    const {\n      paymentOptions,\n      cartId,\n      cartContext,\n      paymentMode,\n      totalPayable,\n      ppsId\n    } = this.props;\n    const { csrfToken, paymentToken } = paymentOptions || {};\n\n    const requestData = {\n      amount: totalPayable,\n      csrf: csrfToken,\n      cartContext: cartContext,\n      cartId: cartId || '',\n      clientContext: 'responsive',\n      paymentMethods: paymentMode,\n      profile: get(\n        window,\n        'location.host',\n        get(window, 'location.hostname', 'www.myntra.com')\n      ),\n      xMetaApp: getXMetaApp(),\n      channel: getChannel()\n    };\n\n    paymentToken && (requestData.paymentToken = paymentToken);\n    ppsId && (requestData.ppsId = ppsId);\n\n    return requestData;\n  }\n\n  handleMyntraInstruments(done = () => {}) {\n    const { myntraInstrumentsData } = this.props;\n    const { paynowInstrumentsData } = myntraInstrumentsData;\n    for (const key in paynowInstrumentsData) {\n      if (key.indexOf('twofa') === -1) {\n        // twofa related keys not to be added as input tags\n        this.requestData[key] = paynowInstrumentsData[key];\n      }\n    }\n    done();\n  }\n\n  getTwoFAPaymentModes(myntraInstrumentsData, instrumentData) {\n    const paymentModes = [];\n    const paymentModeMappings = PaymentConstants.TWO_FA_PAYMENT_MODE_MAPPING;\n    if (get(myntraInstrumentsData, 'twofa_mc_data.enable')) {\n      paymentModes.push(paymentModeMappings.mc);\n    }\n    if (get(myntraInstrumentsData, 'twofa_lp_data.enable')) {\n      paymentModes.push(paymentModeMappings.lp);\n    }\n    if (instrumentData) {\n      paymentModes.push(\n        (\n          paymentModeMappings[instrumentData.type] ||\n          instrumentData.type ||\n          ''\n        ).toUpperCase()\n      );\n    }\n    return paymentModes;\n  }\n\n  checkTwoFAInstrument(instrumentData) {\n    const paymentInstrumentType = get(instrumentData, 'type');\n    const twofaPaymentOptionsList =\n      get(getKVPairValue('TWOFA_PAYMENT_OPTIONS'), 'default') || [];\n    return twofaPaymentOptionsList.includes(paymentInstrumentType);\n  }\n\n  getTwoFADataByPriority(data, instrumentData, instrumentSelected) {\n    const paymentInstrumentType = get(instrumentData, 'type');\n    const userActions = get(data, 'userActions') || {};\n    const mobiles = get(data, 'mobiles') || {};\n    const emailOtp = get(data, 'enableEmailOTP') || {};\n    const userActionsMc = get(userActions, 'myntraCredit') || [];\n    const userActionsLp = get(userActions, 'loyalitypoints') || [];\n    const { lpSelected, mcSelected } = instrumentSelected;\n    //TwoFA order 1) MC 2) LP 3) Rest of the payment instrument\n    if (get(userActionsMc[0], 'value') && mcSelected) {\n      const { myntraCredit = [] } = mobiles || {};\n      return {\n        mobileNumbers: myntraCredit,\n        enableEmailOtp: get(emailOtp, 'myntraCredit') || false\n      };\n    } else if (get(userActionsLp[0], 'value') && lpSelected) {\n      const { loyalitypoints = [] } = mobiles || {};\n      return {\n        mobileNumbers: loyalitypoints,\n        enableEmailOtp: get(emailOtp, 'loyalitypoints') || false\n      };\n    } else if (get(get(userActions, paymentInstrumentType, [])[0], 'value')) {\n      const mobileNumbers = get(mobiles, paymentInstrumentType) || [];\n      const enableEmailOtp = get(emailOtp, paymentInstrumentType) || false;\n      return {\n        mobileNumbers,\n        enableEmailOtp\n      };\n    } else {\n      return null;\n    }\n  }\n\n  checkForMyntraCredit(mcData) {\n    return (\n      mcData.auto_giftcard_amount > 0 &&\n      mcData.auto_giftcard_used === 'true' &&\n      mcData.giftcard_type === 'myntracredit'\n    );\n  }\n\n  checkForTwoFA(done) {\n    const {\n      props: {\n        instrumentData,\n        myntraInstrumentsData,\n        toggleTwoFA,\n        blockTwoFAToggle,\n        orderAddressId: addressId,\n        addressUnifiedId,\n        twoFAResponse,\n        setTwoFADetails,\n        paymentFailureHalfCard\n      }\n    } = this;\n\n    const mcData = {\n      auto_giftcard_amount:\n        get(myntraInstrumentsData, 'auto_giftcard_amount') || '0',\n      auto_giftcard_used:\n        get(myntraInstrumentsData, 'auto_giftcard_used') || '',\n      giftcard_type: get(myntraInstrumentsData, 'giftcard_type') || ''\n    };\n    const mcSelected = this.checkForMyntraCredit(mcData);\n    const lpSelected = get(myntraInstrumentsData, 'useloyaltypoints') === 'Y';\n    const isTwofaEnabled =\n      mcSelected || lpSelected || this.checkTwoFAInstrument(instrumentData);\n    const instrumentSelected = {\n      lpSelected,\n      mcSelected\n    };\n\n    if (isTwofaEnabled) {\n      //check if 2fa response is already in state\n      if (isEmpty(twoFAResponse)) {\n        return PaymentsManager.userTwoFAVerification(\n          {\n            addressId: addressId,\n            addressUnifiedId: addressUnifiedId\n          },\n          res => {\n            const twoFADetails = this.getTwoFADataByPriority(\n              res,\n              instrumentData,\n              instrumentSelected\n            );\n            if (twoFADetails) {\n              const { mobileNumbers = [], enableEmailOtp } = twoFADetails || {};\n              const paymentModes = this.getTwoFAPaymentModes(\n                myntraInstrumentsData,\n                instrumentData\n              );\n              setTwoFADetails(res);\n              const callback = () => {\n                this.submitWithTwoFA();\n                done();\n                if (this.props.isBlockTwoFAToggle) {\n                  blockTwoFAToggle();\n                } else if (!paymentFailureHalfCard) {\n                  toggleTwoFA();\n                }\n              };\n              toggleTwoFA({\n                callback,\n                enableEmailOtp,\n                mobileNumbers,\n                paymentModes\n              });\n            } else {\n              done();\n            }\n          },\n          err => {\n            done();\n          }\n        );\n      } else {\n        const twoFADetails = this.getTwoFADataByPriority(\n          twoFAResponse,\n          instrumentData,\n          instrumentSelected\n        );\n        if (twoFADetails) {\n          const { mobileNumbers = [], enableEmailOtp } = twoFADetails || {};\n          const paymentModes = this.getTwoFAPaymentModes(\n            myntraInstrumentsData,\n            instrumentData\n          );\n          const callback = () => {\n            this.submitWithTwoFA();\n            done();\n            if (this.props.isBlockTwoFAToggle) {\n              blockTwoFAToggle();\n            } else if (!paymentFailureHalfCard) {\n              toggleTwoFA();\n            }\n          };\n\n          return toggleTwoFA({\n            callback,\n            enableEmailOtp,\n            mobileNumbers,\n            paymentModes\n          });\n        }\n      }\n    }\n    done();\n  }\n\n  submitWithTwoFA(done = () => {}) {\n    const { modeAttributes } = this.props;\n    const requestFromPaymentFailureHalfCard = get(\n      this.props,\n      'paymentFailureHalfCard'\n    );\n    const otp = requestFromPaymentFailureHalfCard\n      ? get(OTP_DETAIL, 'otp')\n      : get(this, 'props.twoFA.otp');\n    if (otp) {\n      const loader = !(\n        get(\n          this.savedCardConsentInfo,\n          `allowedCards.${this.props.cardType}`,\n          false\n        ) &&\n        this.props.allowTokenization &&\n        (modeAttributes.saveCard === 'on' || modeAttributes.useSavedCard)\n      );\n\n      this.setState({ loader });\n      const inputs = [\n        { name: 'otpInput', value: otp },\n        { name: 'otpEnabled', value: false }\n      ];\n      inputs.forEach(({ name, value }) => {\n        this.requestData[name] = value;\n      });\n      triggerEvent('SUBMIT_TWOFA', {\n        maData: {\n          entity_type: 'Myntra_2FA_Payments_Page',\n          entity_name: 'Myntra_2FA_Payments_Page'\n        },\n        custom: {\n          widget_items: {\n            data_set: {\n              data: {\n                entity_type: 'Myntra_2FA_Payments_Page',\n                entity_name: '2FA OTP Submit'\n              }\n            }\n          }\n        }\n      });\n    }\n    done();\n  }\n\n  getPayload() {\n    const { modeAttributes } = this.props;\n    this.upiSdkEnabled = get(modeAttributes, 'upiSdkEnabled', false);\n    return { ...(modeAttributes || {}), ...this.requestData };\n  }\n\n  setDataLayerCookie() {\n    const dataLayerMaSessionCookieExpiry = 60 * 30 * 1000;\n    const maSessionCookie = getCookie(cookieKeys.MA_SESSION, false);\n    if (maSessionCookie) {\n      setCookie(\n        cookieKeys.DATALAYER_MA_SESSION,\n        maSessionCookie,\n        dataLayerMaSessionCookieExpiry\n      );\n    }\n  }\n\n  submitRequest(done = () => {}) {\n    const {\n      props: {\n        paymentModeName,\n        paymentUrl,\n        isExchangeCart,\n        showPaymentFailureHalfCard,\n        paymentFailureHalfCardContext\n      },\n      successCallBack,\n      getPayload,\n      errorCallBack\n    } = this;\n    this.props.payMode === 'retry' && this.props.disableRetryTimer();\n    this.setState({ loader: true });\n    const payload = getPayload();\n    const isDopeWithUserConsentEnabled =\n      paymentFailureHalfCardContext === 'dope_consent' &&\n      showPaymentFailureHalfCard;\n    triggerEvent('PROCEED_TO_PAY', { gaLabel: `Ajax-${paymentModeName}` });\n    //temp solution around source in DataLayer object getting changed by PGs\n    this.setDataLayerCookie();\n    if (isExchangeCart) {\n      PaymentsManager.exchange(payload, successCallBack, errorCallBack);\n    } else {\n      PaymentsManager.paynow(\n        paymentUrl,\n        payload,\n        successCallBack,\n        errorCallBack,\n        isDopeWithUserConsentEnabled\n      );\n    }\n\n    if (payload.cardYear || payload.cardMonth || payload.cvvCode) {\n      const {\n        cardNumber,\n        cardMonth,\n        cardYear,\n        cvvCode,\n        ...nonPIIdata\n      } = payload;\n      this.payload = nonPIIdata;\n    } else {\n      this.payload = payload;\n    }\n\n    done();\n  }\n\n  cachePaymentAttributes(done) {\n    if (\n      (isFeatureEnabled('PAYMENT_FAILURE_HALFCARD') ||\n        isFeatureEnabled('DOPE_USER_CONSENT')) &&\n      isLocalStorageEnabled()\n    ) {\n      const {\n        modeAttributes = {},\n        paymentMode,\n        paymentModeName,\n        paymentUrl,\n        paymentInstrument\n      } = this.props;\n      let paymentTriedCount = +getPaymentTriedCount();\n      if (!isEmpty(modeAttributes)) {\n        localStorage.setItem(\n          localStorageKeys.PAYMENT_TRIED_COUNT,\n          ++paymentTriedCount\n        );\n        const paymentAttributes = {\n          paymentUrl: paymentUrl,\n          paymentMode: paymentMode,\n          paymentModeName: paymentModeName,\n          paymentInstrument: paymentInstrument,\n          modeAttributes:\n            paymentMode === PaymentConstants.CREDIT_CARD ? {} : modeAttributes\n        };\n        localStorage.setItem(\n          localStorageKeys.PAYMENT_MODE_ATTRIBUTES,\n          JSON.stringify(paymentAttributes)\n        );\n      }\n    }\n    done();\n  }\n\n  addTokenizationConsent(e) {\n    const { modeAttributes } = this.props;\n    const value =\n      e.target.textContent === this.savedCardConsentInfo.button.consentGiven\n        ? 'true'\n        : 'false';\n\n    if (value === 'true' && this.props.modeAttributes.saveCard === '') {\n      this.props.modeAttributes.saveCard = 'on';\n    }\n    this.props.modeAttributes = {\n      ...modeAttributes,\n      tokenizationConsent: value.toString()\n    };\n  }\n\n  toggleShowConsentFn(flag) {\n    return (done = () => {}) => {\n      this.props.setLoader(false);\n      this.props.toggleSaveCardConsent(flag, done);\n    };\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const {\n      props: {\n        submitCallback,\n        modeAttributes,\n        isTokenizationConsentTaken,\n        allowTokenization\n      },\n      handleMyntraInstruments,\n      checkForTwoFA,\n      submitRequest\n    } = this;\n\n    this.saveCardConsentClickFn = e => {\n      this.addTokenizationConsent(e);\n      this.props.toggleSaveCardConsent(false);\n      handleMyntraInstruments();\n      submitRequest();\n    };\n\n    this.setState({ paynowResponse: null }, () => {\n      if (\n        isLocalStorageEnabled() &&\n        get(this.props, 'instrumentData.type') === 'upi'\n      ) {\n        localStorage.setItem(localStorageKeys.SAVINGS_FOMO_VALUE, 'upi');\n      }\n      const callbacks = [];\n      callbacks.push(this.cachePaymentAttributes);\n      submitCallback && callbacks.push(submitCallback);\n      if (isFeatureEnabled('TWOFA')) {\n        callbacks.push(checkForTwoFA);\n      }\n\n      const saveCard_condition = this.isCardAutoTokenizationEnabled ? '' : 'on';\n      const isAutoConsentFlow =\n        (isTokenizationConsentTaken && allowTokenization) ||\n        saveCard_condition === '';\n      if (\n        get(\n          this.savedCardConsentInfo,\n          `allowedCards.${this.props.cardType}`,\n          false\n        ) &&\n        allowTokenization &&\n        showTokenizationConsent(isAutoConsentFlow) &&\n        (modeAttributes.saveCard === saveCard_condition ||\n          modeAttributes.useSavedCard)\n      ) {\n        callbacks.push(this.toggleShowConsentFn(true));\n      } else {\n        callbacks.push(handleMyntraInstruments);\n        callbacks.push(submitRequest);\n      }\n      this.executeCallbacks(callbacks);\n    });\n  }\n\n  successCallBack(response) {\n    OTP_PAYNOW_RESPONSE = response;\n    this.setState({\n      paynowResponse: response,\n      loader: true\n    });\n  }\n\n  closeLoader() {\n    this.setState({ loader: false, paynowResponse: null });\n  }\n\n  resetPaynowResponse() {\n    this.setState({ paynowResponse: null });\n  }\n\n  errorCallBack(errorResponse) {\n    this.props.payMode === 'retry' && this.props.enableRetryTimer();\n    this.closeLoader();\n    this.props.setPaymentFailureAttributes(\n      PAYNOW_ERROR_CODE.DEFAULT_PAYMENT_FAILURE_ERROR_CODE,\n      getCartContext()\n    );\n  }\n\n  render() {\n    const {\n      props: {\n        cardType,\n        containerName,\n        actionData,\n        deviceMode,\n        paymentModeName,\n        optionUI,\n        setPaymentFailureAttributes,\n        paymentInstrument,\n        setActionButtonRef,\n        toggleSaveCardConsent,\n        showSaveCardConsent,\n        paymentFailureHalfCard\n      },\n      payload,\n      state: { paynowResponse, loader },\n      onSubmit,\n      closeLoader,\n      resetPaynowResponse\n    } = this;\n    OTP_DETAIL = this.props.twoFA;\n    const payNowCallResponse = paymentFailureHalfCard\n      ? OTP_PAYNOW_RESPONSE\n      : paynowResponse;\n    return (\n      <div>\n        {loader && (\n          <PayNowLoader\n            paymentInstrument={paymentInstrument}\n            deviceMode={deviceMode}\n          />\n        )}\n        <form>\n          {optionUI}\n          <button\n            ref={setActionButtonRef}\n            id={`action-${containerName || paymentModeName}`}\n            onClick={onSubmit}\n            className={`${Styles.actionButton} ${actionData.className} ${\n              actionData.hide ? Styles.hide : ''\n            } ${deviceMode === 'mobile' ? Styles.hide : ''}`}\n          >\n            {actionData.name || 'PAY NOW'}\n          </button>\n        </form>\n        {payNowCallResponse && (\n          <PayNowTemplate\n            paynowResponse={payNowCallResponse}\n            closeLoader={closeLoader}\n            resetPaynowResponse={resetPaynowResponse}\n            setPaymentFailureAttributes={setPaymentFailureAttributes}\n            upiSdkEnabled={this.upiSdkEnabled}\n            payload={payload}\n          />\n        )}\n        <SaveCardConsent\n          closeOnBack={false}\n          cardType={cardType}\n          toggleShowConsentFn={toggleSaveCardConsent}\n          showConsent={showSaveCardConsent}\n          onConsentClickFn={this.saveCardConsentClickFn}\n        />\n      </div>\n    );\n  }\n}\n\nPayNowAjax.propTypes = {\n  actionData: PropTypes.object.isRequired,\n  deviceMode: PropTypes.string.isRequired,\n  cartData: PropTypes.object.isRequired,\n  cartContext: PropTypes.string.isRequired,\n  addressUnifiedId: PropTypes.string.isRequired,\n  paymentMode: PropTypes.string.isRequired,\n  paymentModeName: PropTypes.string.isRequired,\n  optionUI: PropTypes.node,\n  setPaymentFailureAttributes: PropTypes.func\n};\n\nPayNowAjax.defaultProps = {\n  setActionButtonRef: () => {},\n  setPaymentFailureAttributes: () => {},\n  actionData: {},\n  formAttributes: {},\n  modeAttributes: {},\n  cartContext: 'default'\n};\n\nexport default PayNowAjax;\n","import React from 'react';\nimport get from 'lodash/get';\n\nimport PayNowAjax from '../PayNowAjax';\n\nimport { getCartContext } from 'commonBrowserUtils/CartHelper';\n\nconst PayNowHandler = props => {\n  const { cartData, modeAttributes = {}, ...restProps } = props;\n  const addressUnifiedId = get(cartData, 'unifiedAddressId', '');\n  const cartId = get(cartData, 'id', '');\n  const cartContext =\n    (get(cartData, 'context') || '').toLowerCase() || getCartContext();\n  return (\n    <PayNowAjax\n      cartId={cartId}\n      cartContext={cartContext}\n      addressUnifiedId={addressUnifiedId}\n      modeAttributes={modeAttributes}\n      {...restProps}\n    />\n  );\n};\n\nexport default PayNowHandler;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PaymentConstants from 'commonBrowserUtils/PaymentConstants';\nimport { isApp, setDocTitleInMobile, isPWA } from 'commonBrowserUtils/Helper';\n\nimport Styles from './paynowLoader.base.css';\n\nimport Myntra from 'iconComp/Myntra.jsx';\nimport { isFeatureEnabled } from 'commonUtils/FeaturesManager';\n\nconst { INSTRUMENT_LOADING_MESSAGE } = PaymentConstants;\nconst PLEASE_WAIT_MESSAGE = 'Please Wait...';\n\nconst CodLoader = props => {\n  const { className, paymentInstrument } = props;\n  const loadingMessage = INSTRUMENT_LOADING_MESSAGE[paymentInstrument];\n  return (\n    <div className={`${Styles.overlay} ${className}`}>\n      <div className={Styles.codBackdrop} />\n      <div className={Styles.codLoaderContainer}>\n        <Myntra height={60} width={65} />\n        <div className={Styles.codMessageContainer}>\n          <div className={Styles.loaderMessage}>{loadingMessage}</div>\n          <div>{PLEASE_WAIT_MESSAGE}</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nclass PayNowLoader extends React.Component {\n  componentWillUnmount() {\n    const { deviceMode } = this.props;\n    const isMobile = deviceMode === 'mobile';\n    isMobile &&\n      setDocTitleInMobile('PAYMENT', {\n        hideStepNumber: isFeatureEnabled('CHECKOUT_STEPS_MWEB')\n      });\n  }\n\n  componentDidMount() {\n    const { deviceMode } = this.props;\n    const isMobile = deviceMode === 'mobile';\n    isMobile && setDocTitleInMobile('PROCESSING PAYMENT');\n  }\n\n  render() {\n    const { className, paymentInstrument } = this.props;\n    const loadingMessage = INSTRUMENT_LOADING_MESSAGE[paymentInstrument] || '';\n    return paymentInstrument === PaymentConstants.COD ? (\n      <CodLoader {...this.props} />\n    ) : (\n      <div className={`${Styles.overlay} ${className ? className : ''}`}>\n        <div\n          className={`${Styles.backdrop} ${isPWA() ? Styles.pwaPadding : null}`}\n        />\n        <div className={Styles.messageContainer}>\n          <Myntra height={75} width={80} className={Styles.myntraIcon} />\n          <div className={Styles.loaderMessage}>{loadingMessage}</div>\n          <div>{PLEASE_WAIT_MESSAGE}</div>\n        </div>\n        <div className={Styles.caution}>\n          Do not press back or close the {isApp() ? 'app' : 'browser'}.\n        </div>\n      </div>\n    );\n  }\n}\n\nPayNowLoader.propTypes = {\n  show: PropTypes.bool.isRequired,\n  className: PropTypes.string\n};\n\nPayNowLoader.defaultProps = {\n  show: false\n};\n\nexport default PayNowLoader;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'commonComp/Modal';\nimport ShieldDashed from 'iconComp/ShieldDashed.jsx';\nimport Sprite from 'commonComp/Sprite';\n\nimport { getKVPairValue } from 'commonUtils/KVPairManager';\nimport Button from 'commonComp/Button';\nimport { isMobile } from 'commonBrowserUtils/Helper';\n\nimport Styles from './savedCardConsent.base.css';\n\nconst Header = props => {\n  const { text, cardType = '' } = props;\n  return (\n    <div className={Styles.header}>{text.replace('<cardType>', cardType)}</div>\n  );\n};\n\nconst Caption = props => {\n  const { text } = props;\n  return <div className={Styles.caption}>{text}</div>;\n};\n\nconst Bulletin = props => {\n  const { list } = props;\n  return (\n    <ul className={Styles.bulletinList}>\n      {list.map((item, index) => {\n        return (\n          <li key={index} className={Styles.bulletinText}>\n            {item}\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nconst onLinkClick = url => {\n  window.location.href = url;\n};\n\nconst LinkText = props => {\n  const {\n    data: { text, link },\n    styleClass,\n    styleUrlClass\n  } = props;\n\n  return text ? (\n    <div className={`${styleClass} ${Styles.linkText}`}>\n      <span>{text}</span>\n      {link.text && link.url ? (\n        <span\n          className={`${Styles.linkTextUrl} ${styleUrlClass}`}\n          onClick={() => onLinkClick(link.url)}\n        >\n          {link.text}\n        </span>\n      ) : null}\n    </div>\n  ) : null;\n};\n\nconst Faq = props => {\n  return <LinkText {...props} styleClass={Styles.faq} />;\n};\n\nconst TnC = props => {\n  return (\n    <LinkText\n      {...props}\n      styleClass={Styles.tnc}\n      styleUrlClass={Styles.tncUrl}\n    />\n  );\n};\n\nconst ConsentButton = props => {\n  const {\n    btnData: { consentGiven, consentNotGiven },\n    onClickFn = () => {}\n  } = props;\n\n  const noConsentClickFn = e => {\n    onClickFn(e);\n    triggerEvent('SAVE_CARD_CONSENT_USER_OPTIONS_CHOSEN', {\n      custom: {\n        custom: {\n          v1: false, // payment_token_user_consent_yes\n          v2: true, // payment_token_user_consent_no\n          v3: false // payment_token_user_consent_back\n        },\n        widget: {\n          name: 'payment_token_user_consent_option',\n          type: 'button'\n        }\n      }\n    });\n  };\n\n  const yesConsentClickFn = e => {\n    onClickFn(e);\n    triggerEvent('SAVE_CARD_CONSENT_USER_OPTIONS_CHOSEN', {\n      custom: {\n        custom: {\n          v1: true, // payment_token_user_consent_yes\n          v2: false, // payment_token_user_consent_no\n          v3: false // payment_token_user_consent_back\n        },\n        widget: {\n          name: 'payment_token_user_consent_option',\n          type: 'button'\n        }\n      }\n    });\n  };\n\n  return (\n    <div className={Styles.container}>\n      <Button onClick={noConsentClickFn} className={Styles.consentNotGivenBtn}>\n        {consentNotGiven}\n      </Button>\n      <Button onClick={yesConsentClickFn} className={Styles.consentGivenBtn}>\n        {consentGiven}\n      </Button>\n    </div>\n  );\n};\n\nconst ImageContainer = props => {\n  const { cardType } = props;\n  return (\n    <div className={Styles.imageContainer}>\n      <Sprite name=\"cardv2-default\" className={Styles.defaultCard} />\n      <ShieldDashed className={Styles.shieldDashed} />\n      <Sprite\n        name={`cardv2-${cardType.toLowerCase()}`}\n        className={Styles.defaultCard}\n      />\n    </div>\n  );\n};\n\nconst SaveCardConsent = props => {\n  const savedCardConsentInfo = getKVPairValue('SAVED_CARD_CONSENT');\n  const {\n    showConsent,\n    onConsentClickFn,\n    cardType,\n    toggleShowConsentFn,\n    closeOnBack,\n    showConsentButton\n  } = props;\n\n  const handleCancelClick = () => {\n    showConsentButton &&\n      triggerEvent('SAVE_CARD_CONSENT_USER_OPTIONS_CHOSEN', {\n        custom: {\n          custom: {\n            v1: false, // payment_token_user_consent_yes\n            v2: false, // payment_token_user_consent_no\n            v3: true // payment_token_user_consent_back\n          },\n          widget: {\n            name: 'payment_token_user_consent_option',\n            type: 'button'\n          }\n        }\n      });\n    toggleShowConsentFn(false);\n  };\n\n  const showModal = showConsent && savedCardConsentInfo.allowedCards[cardType];\n\n  useEffect(() => {\n    showConsentButton &&\n      showModal &&\n      triggerEvent('SAVE_CARD_CONSENT_HALF_CARD_LOAD', {\n        custom: {\n          widget: {\n            name: 'payment_token_user_consent_load',\n            type: 'card'\n          }\n        }\n      });\n  }, [showModal]);\n\n  return showModal ? (\n    <Modal\n      id=\"saveConsentModal\"\n      halfCard={isMobile()}\n      closeOnBack={closeOnBack}\n      cancelCallback={handleCancelClick}\n      cancelIconConfig={{ show: true }}\n      disableBackdropClick={true}\n      stopBackgroundScroll={isMobile()}\n      className={`${Styles.modalContainer} ${!isMobile() &&\n        Styles.desktopModalContainer}`}\n    >\n      <div className={Styles.consentModal}>\n        <ImageContainer cardType={cardType} />\n        <Header text={savedCardConsentInfo.header} cardType={cardType} />\n        <Caption text={savedCardConsentInfo.caption} />\n        <Bulletin list={savedCardConsentInfo.bulletin} />\n        <Faq data={savedCardConsentInfo.faq} />\n        <TnC data={savedCardConsentInfo.tnc} />\n      </div>\n      {showConsentButton ? (\n        <ConsentButton\n          btnData={savedCardConsentInfo.button}\n          onClickFn={onConsentClickFn}\n        />\n      ) : null}\n    </Modal>\n  ) : null;\n};\n\nexport default SaveCardConsent;\n\nSaveCardConsent.propTypes = {\n  cardType: PropTypes.string,\n  showConsent: PropTypes.bool,\n  showConsentButton: PropTypes.bool,\n  onConsentClickFn: PropTypes.func,\n  toggleShowConsentFn: PropTypes.func\n};\n\nSaveCardConsent.defaultProps = {\n  showConsentButton: true,\n  onConsentClickFn: () => {},\n  toggleShowConsentFn: () => {}\n};\n"],"sourceRoot":""}